<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ê¸¸ë³‘ì› ë‹¥í„°ì¹´ ì•ˆë‚´ | ì¸ì²œê¶Œì—­ì™¸ìƒì„¼í„°</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0b7ac4" />

  <!-- ğŸ”¹ ì •ì  manifest íŒŒì¼ ì—°ê²° -->
  <link rel="manifest" href="manifest.webmanifest" />

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MCKTRFREN3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-MCKTRFREN3', { debug_mode: true });
  </script>

  <style>
    :root {
      --primary: #0b7ac4;
      --primary-light: #e6f3fb;
      --accent: #1cb5b2;
      --text-main: #222;
      --text-muted: #666;
      --bg: #f5f7fb;
      --card-radius: 18px;
      --shadow-soft: 0 10px 25px rgba(0,0,0,0.06);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: var(--bg);
      color: var(--text-main);
      line-height: 1.6;
    }

    a { color: inherit; text-decoration: none; }

    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px 16px 40px;
    }

    html { scroll-behavior: smooth; }

    /* ====== TOP NAV ====== */
    .top-nav {
      position: sticky;
      top: 0;
      z-index: 20;
      backdrop-filter: blur(16px);
      background: linear-gradient(to bottom, rgba(245,247,251,0.95), rgba(245,247,251,0.4));
      padding: 6px 0 4px;
    }

    .top-nav-inner {
      max-width: 960px;
      margin: 0 auto;
      padding: 0 16px;
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .nav-chip {
      font-size: 0.78rem;
      padding: 5px 10px;
      border-radius: 999px;
      border: 1px solid #dde2f0;
      background: #fff;
      white-space: nowrap;
      color: #333;
    }

    .nav-chip.primary {
      background: var(--primary);
      border-color: var(--primary);
      color: #fff;
      font-weight: 600;
    }

    /* âœ… ì§€ë„ íƒ­ í•‘í¬ í…Œë‘ë¦¬ */
    .nav-chip-map{
      border-color: #ff4b8b !important;
      color: #d81b60 !important;
      font-weight: 700;
    }

    /* ====== HERO ====== */
    .hero {
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: #fff;
      border-radius: 24px;
      padding: 24px 20px 28px;
      box-shadow: var(--shadow-soft);
      margin: 0 0 20px;
      position: relative;
    }
    .hero-top-label {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      opacity: 0.9;
      margin-bottom: 8px;
    }
    .hero-title { font-size: 1.7rem; font-weight: 700; margin-bottom: 4px; }
    .hero-subtitle { font-size: 0.95rem; opacity: 0.95; margin-bottom: 16px; }

    .hero-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 18px;
      font-size: 0.82rem;
    }
    .badge {
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.16);
      border: 1px solid rgba(255,255,255,0.25);
      backdrop-filter: blur(6px);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .hero-actions { display: flex; flex-wrap: wrap; gap: 10px; }
    .btn-primary {
      flex: 1 1 140px;
      text-align: center;
      background: #fff;
      color: var(--primary);
      padding: 10px 14px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 0.95rem;
      box-shadow: 0 8px 18px rgba(0,0,0,0.12);
      border: none;
      cursor: pointer;
    }
    .btn-outline {
      flex: 1 1 120px;
      text-align: center;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.7);
      color: #fff;
      font-size: 0.9rem;
      padding: 9px 12px;
      opacity: 0.9;
      background: transparent;
      cursor: pointer;
    }
    .btn-survey {
      background: #f0f7fb;
      color: #0b7ac4;
      border-color: #d0d7ea;
      opacity: 1;
    }
    .btn-survey small { color: #555; opacity: 0.9; }
    .btn-primary small, .btn-outline small {
      display: block;
      font-size: 0.75rem;
      font-weight: 400;
      opacity: 0.85;
      margin-top: 2px;
    }

    .request-warning {
      font-size: 0.8rem;
      color: #d32f2f;
      margin-top: 10px;
      line-height: 1.4;
      background: #ffebee;
      border-radius: 10px;
      padding: 6px 10px;
      border-left: 3px solid #c62828;
    }

    /* ====== GENERAL ====== */
    main { margin-top: 10px; }
    section { margin-bottom: 20px; }
    .section-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      color: var(--text-muted);
      margin-bottom: 4px;
    }
    .section-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: #111;
    }
    .section-description { font-size: 0.9rem; color: var(--text-muted); margin-bottom: 12px; }

    .card {
      background: #fff;
      border-radius: var(--card-radius);
      padding: 16px 16px 14px;
      box-shadow: var(--shadow-soft);
      margin-bottom: 12px;
    }
    .card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 8px;
    }
    .card-title {
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .card-chip {
      font-size: 0.68rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--primary-light);
      color: var(--primary);
      font-weight: 500;
      white-space: nowrap;
    }
    .card-body { font-size: 0.9rem; color: var(--text-main); }
    .card-body ul { padding-left: 18px; }
    .card-body li { margin-bottom: 4px; }

    .highlight {
      background: #fff7e0;
      border-left: 3px solid #f0b429;
      padding: 8px 10px;
      border-radius: 10px;
      font-size: 0.85rem;
      margin-top: 6px;
      color: #5b4705;
    }

    .pill-row { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 6px; }
    .pill {
      font-size: 0.78rem;
      padding: 4px 9px;
      border-radius: 999px;
      background: var(--primary-light);
      color: var(--primary);
      white-space: nowrap;
    }
    .pill.secondary { background: #eee; color: #555; }

    .skills-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
    .skills-tagline { font-size: 0.78rem; color: var(--text-muted); margin-bottom: 6px; }
    .skills-label { font-size: 0.8rem; font-weight: 600; color: var(--primary); margin-bottom: 4px; }
    .skills-list { font-size: 0.88rem; padding-left: 16px; }
    .skills-list li { margin-bottom: 3px; }
    .footnote { font-size: 0.78rem; color: var(--text-muted); margin-top: 6px; }

    footer { margin-top: 26px; font-size: 0.78rem; color: var(--text-muted); text-align: center; }
    footer span { display: block; }

    @media (min-width: 720px) {
      .page { padding: 24px 20px 48px; }
      .hero { padding: 28px 26px 30px; margin-top: 12px; }
      .hero-title { font-size: 2rem; }
      .hero-subtitle { font-size: 1rem; }
      .section-title { font-size: 1.2rem; }
      .skills-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    /* ====== IMAGE STRIP ====== */
    .image-strip {
      width: 100%;
      height: 180px;
      border-radius: 20px;
      overflow: hidden;
      margin: 12px 0 18px;
      box-shadow: var(--shadow-soft);
      position: relative;
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
    }
    .image-strip::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(to bottom, rgba(0,0,0,0.25), rgba(0,0,0,0.35));
    }
    .image-strip-inner {
      position: relative;
      z-index: 1;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 12px 16px;
      color: #fff;
    }
    .image-strip-title { font-size: 1rem; font-weight: 600; }
    .image-strip-subtitle { font-size: 0.8rem; opacity: 0.9; }
    .image-strip-g1 { background-image: url("images/G1.jpg"); }
    .image-strip-g2 { background-image: url("images/G2.jpg"); }
    .image-strip-g3 { background-image: url("images/G3.jpg"); }
    @media (min-width: 720px) { .image-strip { height: 210px; } }

    /* ====== HERO QR ====== */
    .hero-header-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 12px;
    }
    .hero-title-block { flex: 1 1 auto; min-width: 0; }
    .hero-qr-wrap { display: flex; flex-direction: column; align-items: flex-end; gap: 6px; }
    .hero-qr {
      width: 90px; height: 90px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.18);
      object-fit: cover;
    }
    .hero-qr-buttons { display: flex; flex-direction: column; gap: 4px; }
    .hero-qr-btn.hero-qr-text {
      border: none;
      background: transparent;
      padding: 0;
      margin-top: 4px;
      box-shadow: none;
      color: #e60000 !important;
      text-decoration: underline;
      font-size: 0.8rem;
      cursor: pointer;
    }
    .hero-qr-btn.hero-qr-text:active { opacity: 0.6; }
    .hero-qr-btn {
      border-radius: 999px;
      padding: 4px 8px;
      border: 1px solid #d0d7ea;
      background: #f5f7fb;
      cursor: pointer;
      text-decoration: none;
      color: #333;
      white-space: nowrap;
      font-size: 0.78rem;
    }
    .hero-qr-btn.primary {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
    }
    @media (max-width: 600px) {
      .hero-qr { width: 72px; height: 72px; }
      .hero-qr-buttons { align-items: flex-end; }
      .hero-qr-btn { font-size: 0.75rem; padding: 4px 8px; }
    }

    /* ====== MAP ====== */
    .map-container {
      width: 100%;
      height: 360px;
      border-radius: 16px;
      overflow: hidden;
      position: relative;
    }
    @media (min-width: 720px) {
      .map-container { height: 420px; }
    }

    .map-expand-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      z-index: 30;
      border-radius: 999px;
      padding: 8px 12px;
      border: 1px solid #d0d7ea;
      background: rgba(255,255,255,0.95);
      cursor: pointer;
      font-size: 0.82rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      display: none;
      user-select: none;
    }
    @media (min-width: 900px) {
      .map-expand-btn { display: inline-flex; align-items: center; gap: 6px; }
    }

    #map-modal {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
    }
    #map-modal .modal-inner {
      width: min(1200px, 96vw);
      height: min(780px, 92vh);
      background: #fff;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 20px 60px rgba(0,0,0,0.25);
      position: relative;
      display: flex;
      flex-direction: column;
    }
    #map-modal .modal-topbar {
      padding: 10px 12px;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }
    #map-modal .modal-title {
      font-weight: 700;
      font-size: 0.95rem;
      color: #111;
    }
    #map-modal .modal-close {
      border: 1px solid #d0d7ea;
      background: #fff;
      border-radius: 999px;
      padding: 7px 12px;
      cursor: pointer;
      font-size: 0.85rem;
    }
    #modal-map {
      flex: 1 1 auto;
      width: 100%;
      height: 100%;
    }

    /* ====== MARKER LABELS ====== */
    .marker-label {
      background: #ffffff;
      border: 1px solid #d0d4e4;
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      white-space: nowrap;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
      -webkit-touch-callout: none;
      cursor: pointer;
      line-height: 1.25;
    }
    .marker-label.gil { border-color: #7b4dd6; color: #5b3fa3; font-weight: 700; }
    .marker-label.user { border-color: #c62828; color: #b71c1c; font-weight: 700; }
    .marker-label.patient { border-color: #ff4b8b; color: #d81b60; font-weight: 800; }

    /* ====== GPS BANNER (MAP TAB) ====== */
.gps-banner {
  margin: 10px 0 14px;
  padding: 12px 16px;
  border-radius: 18px;
  background: linear-gradient(135deg, #dff7d7, #bff0b7) !important; /* âœ… ì—°ë‘ */
  border: 1px solid #59c36a;
  box-shadow: 0 6px 16px rgba(0,0,0,0.09);
}
.gps-banner-title{
  color:#1b5e20;   /* ì œëª©ë„ ì—°ë‘í†¤ */
}

    .gps-instruction {
      font-size: 0.82rem;
      color: #4a1e2b;
      line-height: 1.35;
      margin-bottom: 10px;
    }
    .gps-instruction .red { color: #0b7ac4; font-weight: 800; }
    .gps-instruction .pink { color: #4a1e2b; font-weight: 800; }

.gps-instruction .manual-red{
  color:#c62828;
  font-weight:900;
}

    .btn-gps {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid #0b7ac4;
      background: #0b7ac4;
      color: #fff;
      font-size: 0.82rem;
      cursor: pointer;
    }
    .btn-gps:active { transform: scale(0.98); box-shadow: 0 2px 6px rgba(0,0,0,0.15); }

.gps-address {
  margin-top: 8px;
  font-size: 0.82rem;
  color: #0b7ac4;
  background: #e6f3fb;               /* âœ… ì—°íŒŒë‘ ë°°ê²½ */
  border: 1px solid #0b7ac4;
  border-radius: 12px;
  padding: 8px 10px;
  display: none;
}
.gps-address b { color: #0b7ac4; }

.btn-manual {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 7px 12px;
  border-radius: 999px;
  border: 1px solid #c62828;
  background: #c62828;
  color: #fff;
  font-size: 0.82rem;
  cursor: default;
  user-select: none;
  font-weight: 800;
}

    .manual-panel {
      margin-top: 10px;
      padding: 10px 12px;
      background: #fff;
      border: 1px solid #ffd1e2;
      border-radius: 14px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.06);
      display: block; /* âœ… í•­ìƒ ë³´ì´ê²Œ */
    }
    .manual-panel .manual-title {
      font-size: 0.85rem;
      font-weight: 800;
      color: #d81b60;
      margin-bottom: 6px;
    }
.manual-panel input {
  width: 100%;
  font-size: 0.9rem;
  padding: 10px 10px;
  border-radius: 12px;
  border: 2px solid #ff4b8b;              /* âœ… ê¸°ë³¸ë¶€í„° í•‘í¬ í…Œë‘ë¦¬ */
  outline: none;
  background: #fff;
  box-shadow: 0 0 0 2px rgba(255,75,139,0.08); /* âœ… â€œì…ë ¥ì¹¸â€ ëŠë‚Œ */
}
.manual-panel input:hover{
  box-shadow: 0 0 0 3px rgba(255,75,139,0.12);
}
    .manual-results {
      margin-top: 8px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #f0f0f0;
      display: none;
    }
    .manual-item {
      padding: 10px 10px;
      background: #fff;
      cursor: pointer;
      border-bottom: 1px solid #f2f2f2;
      font-size: 0.86rem;
      line-height: 1.25;
    }
    .manual-item:hover { background: #fff5f9; }
    .manual-item:last-child { border-bottom: none; }
    .manual-item b { display: block; font-size: 0.88rem; color: #111; }
    .manual-item small { display: block; color: #777; margin-top: 2px; }

    /* ====== TRANSFER CARDS (CRITERIA) ====== */
    .transfer-card { position: relative; margin: 8px 0 18px; }
    .transfer-image { width: 100%; display: block; border-radius: 14px; }
    .transfer-tag {
      position: absolute; top: -10px; right: 12px;
      padding: 4px 10px;
      font-size: 0.8rem;
      font-weight: 600;
      color: #b22222;
      background: #ffffff;
      border-radius: 999px;
      border: 1px solid #b22222;
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
      white-space: nowrap;
    }

    /* ====== CALL BTN FULL ====== */
    .call-btn-full {
      display: block;
      width: 100%;
      text-align: center;
      padding: 14px 12px 10px;
      background: #ffffff;
      border-radius: 999px;
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
      border: 1px solid #dfe7f5;
      color: var(--primary);
      text-decoration: none;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
      cursor: pointer;
    }
    .call-btn-full:active { transform: scale(0.97); box-shadow: 0 4px 10px rgba(0,0,0,0.12); }
    .call-btn-full .call-icon { font-size: 1.1rem; margin-right: 4px; vertical-align: middle; }
    .call-btn-full .call-title { font-size: 1rem; font-weight: 700; vertical-align: middle; }
    .call-btn-full .call-sub { display: block; font-size: 0.75rem; color: #666; margin-top: 2px; }

    /* ====== ETC (ì›ë³¸ ìœ ì§€) ====== */
    .etc-section { margin-top: 32px; }
    .etc-text { font-size: 0.85rem; color: var(--text-main); margin-top: 0.2px; margin-bottom: 50px; line-height: 1.4; }
    .etc-text strong { font-weight: 700; }
    .etc-image-full { width: 100%; border-radius: 14px; margin: 14px 0; object-fit: cover; }
    .etc-image-half { width: 50%; border-radius: 14px; height: 360px; object-fit: cover; }
    .etc-image-amputation { width: 100%; border-radius: 14px; margin: 16px 0; height: 430px; object-fit: cover; }

/* ====== SURVEY: EXPERIENCE (ì—°ë³´ë¼ í†µì¼ + ê¸°ë³¸ ìˆ¨ê¹€) ====== */
:root{
  --lavender-50:#efe9ff;
  --lavender-100:#e0d4ff;
  --lavender-200:#c8b3ff;
  --lavender-300:#a889ff;
  --lavender-400:#8b63f2;
  --lavender-600:#5b2fd6;
  --lavender-700:#4721b0;
}

/* ìƒë‹¨ ë¼ë””ì˜¤ê°€ ìˆëŠ” ë¸”ë¡(used_doctorcar)ë„ ì—°ë³´ë¼ë¡œ */
.experience-wrapper{
  background: linear-gradient(
    135deg,
    var(--lavender-300),
    var(--lavender-100)
  );
  border: 2px solid var(--lavender-400);
  border-radius: 18px;
  padding: 16px;
  box-shadow: 0 10px 24px rgba(91,47,214,0.25);
}


/* ì œëª©ë„ ì—°ë³´ë¼ */
.experience-title{
  color: var(--lavender-700);
  font-weight: 800;
}

/* âœ… ì˜ˆ(yes) ì„ íƒ ì „ì—ëŠ” ì•„ë˜ ìƒì„¸ ë¸”ë¡ ìˆ¨ê¹€ */
#doctorcar-experience-block{
  background: linear-gradient(
    180deg,
    var(--lavender-100),
    var(--lavender-50)
  );
  border-radius: 20px;
  padding: 12px;
  display: none;              /* ê¸°ë³¸ ìˆ¨ê¹€ */
  margin-top: 10px;
}

/* â€œìª¼ë¥´ë¥µâ€ ì• ë‹ˆë©”ì´ì…˜ìš©: ì—´ë¦´ ë•Œ ì ìš©ë  í´ë˜ìŠ¤ */
#doctorcar-experience-block.is-open{
  display: block;
  animation: expSlideDown 180ms ease-out;
}

@keyframes expSlideDown{
  from{ opacity: 0; transform: translateY(-6px); }
  to{ opacity: 1; transform: translateY(0); }
}

/* ì•ˆë‚´ ë¬¸êµ¬(â€» ì•„ë˜ í•­ëª©...) */
.experience-note{
  background: var(--lavender-50);
  border: 1px dashed var(--lavender-200);
  color: #4a3a7a;
  border-radius: 14px;
  padding: 10px 12px;
  font-size: 0.82rem;
  margin-bottom: 10px;
}

/* ê° ìƒì„¸ ì¹´ë“œ */
.exp-sub-card{
  background: #f6f2ff;   /* ê±°ì˜ í°ë° í™•ì‹¤íˆ ë³´ë¼ */
  border: 1.5px solid var(--lavender-300);
  border-radius: 18px;
  padding: 12px;
  box-shadow: 0 6px 16px rgba(91,47,214,0.18);
}

.exp-sub-card h4{
  font-size: 0.88rem;
  margin-bottom: 8px;
  color: var(--lavender-700);
  font-weight: 800;
}

.exp-sub-card label{
  display: block;
  margin: 6px 0;
  font-size: 0.9rem;
}

/* textarea/ì…ë ¥ë„ ì—°ë³´ë¼ í¬ì»¤ìŠ¤ */
#treatment_free_text:focus,
#improvement_free_text:focus{
  outline: none;
  border-color: var(--lavender-300);
  box-shadow: 0 0 0 3px rgba(198,176,255,0.22);
}

/* ====== ì •ë³´ ì„¹ì…˜: ì‚´ì§ ë– ë³´ì´ê²Œ ====== */
.info-section{
  background: rgba(255,255,255,0.9);   /* ë°°ê²½ì„ ì¡°ê¸ˆ ë” í°ìª½ìœ¼ë¡œ */
border: 1.5px solid rgba(91,47,214,0.35);  border-radius: 14px;
  padding: 16px 18px;
  margin-bottom: 18px;
outline: 1px solid rgba(0,0,0,0.05);

  box-shadow:
    0 3px 6px rgba(0,0,0,0.06);  /* í¼ì§€ì§€ ì•ŠëŠ” ê·¸ë¦¼ì */
}
/* ====== InfoWindow(í´ë¦­ íŒì—…) ë ˆì´ì•„ì›ƒ ê³ ì • ====== */
.iw-wrap{
  width: 210px;            /* âœ… ë°•ìŠ¤ í­ ê³ ì • (ë¹ˆê³µê°„ ì»¤ì§€ëŠ” ê²ƒ ë°©ì§€) */
  max-width: 210px;
  padding: 8px 10px;
  box-sizing: border-box;
  overflow: hidden;
  font-size: 12px;
  line-height: 1.35;
  display: block;
}

.iw-title{
  font-weight: 900;
  margin-bottom: 4px;
}

.iw-row{
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 2px 0;
  /* âŒ space-between ì œê±° */
}

.iw-left{
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;        /* âœ… â€œí™˜ìë°œìƒì§€ë¡œë¶€í„°â€ ì¤„ë°”ê¿ˆ ê¸ˆì§€ */
  overflow: hidden;
  text-overflow: ellipsis;
}

.iw-right{
  flex: 0 0 auto;
  margin-left: auto;          /* âœ… ì˜¤ë¥¸ìª½ì—ë§Œ ë¶™ì´ê³  ê³¼í•œ ë¹ˆê³µê°„ ì œê±° */
  white-space: nowrap;
  font-weight: 800;
}

.iw-phone{
  width: 100%;
  margin-top: 6px;
  padding-top: 6px;
  border-top: 1px dashed #e2e2e2;
  box-sizing: border-box;
  overflow: hidden;           /* âœ… ì‚ì ¸ë‚˜ì˜¤ëŠ” ê²ƒ ë°©ì§€ */
}

.iw-phone a{
  display: block;             /* âœ… ë†’ì´ ê³„ì‚° ì•ˆì •í™”(ì „í™”ë²ˆí˜¸ê°€ ì•„ë˜ë¡œ íŠ€ëŠ” ë¬¸ì œ í•´ê²°) */
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* âœ… â€œí˜„ì¬ìœ„ì¹˜ë¡œë¶€í„°â€ íŒŒë€ ê¸€ì”¨ + íŒŒë€ í…Œë‘ë¦¬(ë°°ì§€ ëŠë‚Œ) */
.iw-from-gps{
  color: #0b7ac4 !important;
  font-weight: 900;
  padding: 1px 6px;
  border: 1px solid #0b7ac4;
  border-radius: 999px;
  background: #e6f3fb;
}

.iw-from-patient{
  color: #d81b60 !important;
  font-weight: 900;
}

/* ====== ETA POPUP (CustomOverlay) ====== */
.eta-pop{
  width: 220px;
  max-width: 220px;
  background:#fff;
  border:1px solid #d0d4e4;
  border-radius: 14px;
  box-shadow: 0 10px 26px rgba(0,0,0,0.18);
  overflow:hidden;
  font-size:12px;
  line-height:1.35;
}

.eta-pop-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  padding:8px 10px;
  border-bottom:1px solid #f0f0f0;
}

.eta-pop-title{
  font-weight:900;
  font-size:12.5px;
  color:#111;
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.eta-pop-close{
  border:1px solid #d0d7ea;
  background:#fff;
  border-radius: 999px;
  padding:2px 8px;
  cursor:pointer;
  font-size:12px;
  line-height:1.2;
}

.eta-pop-body{ padding:8px 10px; }

.eta-row{
  display:flex;
  align-items:center;
  gap:8px;
  margin:4px 0;
}
.eta-left{
  flex: 1 1 auto;
  min-width:0;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-weight:900;
}
.eta-right{
  flex:0 0 auto;
  white-space:nowrap;
  font-weight:900;
}

.eta-from-gps{
  color:#0b7ac4;
  border:1px solid #0b7ac4;
  background:#e6f3fb;
  padding:1px 6px;
  border-radius:999px;
}
.eta-from-patient{
  color:#d81b60;
  border:1px solid #ff4b8b;
  background:#fff0f6;
  padding:1px 6px;
  border-radius:999px;
}

.eta-phone{
  margin-top:8px;
  padding-top:8px;
  border-top:1px dashed #e2e2e2;
}
.eta-phone a{
  display:block;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-weight:900;
}


  </style>

  <!-- Kakao ì§€ë„ SDK (Geocoder í¬í•¨: libraries=services) -->
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b9ccd41f81d72605a0882435c138dc91&libraries=services"></script>
</head>

<body>
<div id="page-top"></div>

  <!-- âœ… ìƒë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ìš”ì²­ ìˆœì„œ ë°˜ì˜) -->
  <nav class="top-nav">
    <div class="top-nav-inner">
      <a href="#page-top" class="nav-chip primary">ë§¨ ìœ„ë¡œ</a>
      <a href="#map" class="nav-chip nav-chip-map">ì§€ë„</a>
      <a href="#criteria" class="nav-chip">ì´ì†¡ê¸°ì¤€</a>
      <a href="#intro" class="nav-chip">ì†Œê°œ</a>
      <a href="#who" class="nav-chip">ìš”ì²­ ì£¼ì²´</a>
      <a href="#how" class="nav-chip">ìš”ì²­ ë°©ë²•</a>
      <a href="#when" class="nav-chip">ìš”ì²­ ì‹œì </a>
      <a href="#decision" class="nav-chip">ì¶œë™ ê²°ì •</a>
      <a href="#can-do" class="nav-chip">ë‹¥í„°ì¹´ ì—­í• </a>
      <a href="#survey" class="nav-chip">ì„¤ë¬¸</a>
    </div>
  </nav>

  <div class="page">

    <!-- âœ… íˆì–´ë¡œ ì˜ì—­ (HERO ë§¨ ìœ„ ìœ ì§€) -->
    <header class="hero" id="top">
      <div class="hero-header-row">
        <div class="hero-title-block">
          <div class="hero-top-label">
            Incheon Regional Trauma Center Â· Gachon University Gil Hospital
          </div>
          <h1 class="hero-title">ê¸¸ë³‘ì› ë‹¥í„°ì¹´ ì•ˆë‚´</h1>
          <p class="hero-subtitle">
            ì¤‘ì¦ì™¸ìƒ í™˜ìë¥¼ ì‚¬ê³ í˜„ì¥ê³¼ ìµœì´ˆë³‘ì›ì—ì„œ<br />
            <strong>ì™¸ìƒì™¸ê³¼ ì „ë¬¸ì˜ê°€ ì§ì ‘</strong> ë™ìŠ¹í•˜ì—¬ ê¸¸ë³‘ì›ê¹Œì§€ ì´ì†¡í•©ë‹ˆë‹¤.
          </p>
        </div>

        <div class="hero-qr-wrap">
          <img src="images/Gqr.jpg" alt="ê¸¸ë³‘ì› ë‹¥í„°ì¹´ ì•ˆë‚´ QR ì½”ë“œ" class="hero-qr" />
          <div class="hero-qr-buttons">
            <a href="images/Gqr.jpg" target="_blank" class="hero-qr-btn primary">QR í¬ê²Œ ë³´ê¸°</a>
            <button type="button" class="hero-qr-btn" id="qr-copy-btn">ë§í¬ ë³µì‚¬</button>
            <a href="doctorcar.url" download="ê¸¸ë³‘ì› ë‹¥í„°ì¹´ ë°”ë¡œê°€ê¸°.url" class="hero-qr-btn" id="pc-shortcut-btn">
              ğŸ–¥ï¸ PC ë°”ë¡œê°€ê¸° ìƒì„±
            </a>
            <button type="button" class="hero-qr-btn hero-qr-text" id="installPwaBtn">ğŸ“± ëª¨ë°”ì¼ì•± ì„¤ì¹˜í•˜ê¸°</button>
          </div>
        </div>
      </div>

      <div class="hero-badges">
        <div class="badge">ğŸš‘ Physician-staffed vehicle</div>
        <div class="badge">ğŸ¥ ì¸ì²œê¶Œì—­ ì™¸ìƒì„¼í„° ì†Œì†</div>
        <div class="badge">â± ê³¨ë“ ì•„ì›Œ í™•ë³´</div>
      </div>

      <div class="hero-actions">
        <button type="button" class="btn-primary call-btn" data-tel="01062063010" data-call-target="hero_doctorcar">
          ğŸ“ ë‹¥í„°ì¹´ ë°”ë¡œ ìš”ì²­
          <small>ê¸¸ë³‘ì› ì™¸ìƒë‹¹ì§í° Â· 24ì‹œê°„ 365ì¼</small>
        </button>

        <a href="#how" class="btn-outline">
          â„¹ï¸ ì‚¬ìš© ë°©ë²• ë³´ê¸°
          <small>ëˆ„ê°€, ì–¸ì œ, ì–´ë–»ê²Œ ìš”ì²­í•˜ë‚˜</small>
        </a>

        <button type="button" class="btn-outline btn-survey" id="open-survey-btn">
          ğŸ“Š ì›¹/ë‹¥í„°ì¹´ ì‚¬ìš© ê²½í—˜ ì„¤ë¬¸
          <small>1ë¶„ ì†Œìš” Â· ìµëª…</small>
        </button>
      </div>

      <p class="request-warning">
        â€» ë‹¥í„°ì¹´ ì¶œë™ ìš”ì²­ì€ <strong>119 êµ¬ê¸‰ëŒ€ì› ë° ì˜ë£Œì§„</strong>ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
        ì¼ë°˜ì¸ì˜ ì§ì ‘ ìš”ì²­ì€ <strong>ë¶ˆê°€</strong>í•©ë‹ˆë‹¤.
      </p>
    </header>

    <!-- âœ… ì§€ë„ ì„¹ì…˜(í•‘í¬ ë°°ë„ˆë¡œ í†µí•©) -->
    <main>

      <section id="map">
        <div class="section-label">Map</div>
        <h2 class="section-title" style="margin-bottom:6px;">ì§€ë„</h2>

        <div class="gps-banner">
          <div class="gps-banner-title">ê·¼ì²˜ë³‘ì›ê¹Œì§€ ì†Œìš”ì‹œê°„ ì°¾ì•„ë³´ê¸°</div>

          <div class="gps-instruction">
          <span class="red">GPSë¡œ í˜„ìœ„ì¹˜ë¥¼ íŠ¹ì •í•˜ê±°ë‚˜</span><br>
<b><span class="manual-red">ìˆ˜ë™ì£¼ì†Œì…ë ¥ìœ¼ë¡œ í™˜ìë°œìƒì§€ ì…ë ¥í•˜ë©´</span></b> ê°ê° ì£¼ë³€ë³‘ì›ê¹Œì§€ì˜ ì´ì†¡ê±°ë¦¬ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
          </div>

          <!-- âœ… GPS ë²„íŠ¼(ìƒë‹¨ ë°°ë„ˆ ì‚­ì œ â†’ ì—¬ê¸°ë§Œ ì‚¬ìš©) -->
          <button type="button" class="btn-gps" id="enable-gps-map-btn">
            ğŸ“ GPSë¡œ í˜„ìœ„ì¹˜ì£¼ì†Œ ì°¾ê¸°
          </button>

          <!-- âœ… ì—­ì§€ì˜¤ì½”ë”© ì£¼ì†Œ í‘œì‹œ -->
          <div class="gps-address" id="gps-address-map"></div>

          <!-- âœ… ìˆ˜ë™ ì…ë ¥ì¹¸ ìƒì‹œ ë…¸ì¶œ -->
          <div class="manual-panel" id="manual-panel">
<div class="btn-manual">â­ í™˜ìë°œìƒ ì£¼ì†Œëª… ìˆ˜ë™ ì…ë ¥í•˜ê¸° (ìë™ì™„ì„±ì—ì„œ ì„ íƒ í•„ìˆ˜)</div>
            <input type="text" id="patient-input" placeholder="ì˜ˆ: ê¹€í¬ê³µí•­, ì¸ì²œ ë‚¨ë™êµ¬ â—‹â—‹ë¡œ 12, â—‹â—‹ë¹Œë”©" autocomplete="off" />
            <div class="manual-results" id="patient-results"></div>
            <div style="margin-top:8px; font-size:0.78rem; color:#666;">
              â€» ê²€ìƒ‰ ê²°ê³¼ë¥¼ í´ë¦­í•˜ë©´ ì§€ë„ì— <b style="color:#d81b60;">â­ í™˜ìë°œìƒì§€</b>ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
            </div>
          </div>
        </div>

        <article class="card" style="margin-top:12px;">
          <div class="card-body">
            <div id="secondary-hospitals-map" class="map-container">
              <button type="button" class="map-expand-btn" id="open-map-modal-btn">
                ğŸ—ºï¸ ì§€ë„ í¬ê²Œë³´ê¸°
              </button>
            </div>

            <p style="font-size:0.78rem; color:#777; margin-top:8px;">
              â€» ë³¸ ì§€ë„ëŠ” <strong>ê¸¸ë³‘ì›ê³¼ ê°€ê¹Œìš´ ë³‘ì›ë“¤</strong>ì„ ì†Œê°œí•˜ê¸° ìœ„í•œ ê²ƒì´ë©°, ì‹¤ì‹œê°„ ìˆ˜ìš© ê°€ëŠ¥ ì—¬ë¶€ëŠ”
              ë°˜ë“œì‹œ ì „í™”ë¡œ í™•ì¸í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.
            </p>
          </div>
        </article>
      </section>

      <!-- âœ… ì´ì†¡ê¸°ì¤€ ì„¹ì…˜(ê°ˆê³ /gtpë¥¼ ì—¬ê¸°ë¡œ ì´ë™) -->
      <section id="criteria">
        <div class="section-label">Criteria</div>
        <h2 class="section-title">ì´ì†¡ê¸°ì¤€</h2>

        <div class="transfer-card">
          <img src="images/Galgo.jpg" alt="ì™¸ìƒì„¼í„° ì´ì†¡ ê¸°ì¤€" class="transfer-image" />
          <div class="transfer-tag">ì™¸ìƒì„¼í„° ì´ì†¡ ê¸°ì¤€</div>
        </div>

        <div class="transfer-card">
          <img src="images/Gtp.jpg" alt="Trauma point ê¸°ì¤€" class="transfer-image" />
          </div>
      </section>

      <div class="image-strip image-strip-g2">
        <div class="image-strip-inner">
          <div class="image-strip-title">í˜„ì¥ê³¼ ìµœì´ˆë³‘ì›ì„ ì‡ëŠ” ë‹¤ë¦¬</div>
          <div class="image-strip-subtitle">119Â·ì§€ì—­ë³‘ì›ê³¼ í•¨ê»˜ ë§Œë“œëŠ” ì™¸ìƒ ë„¤íŠ¸ì›Œí¬</div>
        </div>
      </div>

      <!-- âœ… ì†Œê°œ -->
<section id="intro" class="info-section">        <div class="section-label">About</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ì†Œê°œ</h2>
        <article class="card">
          <div class="card-header">
            <h3 class="card-title">ë‹¥í„°ì¹´ë€?</h3>
            <span class="card-chip">ì¤‘ì¦ì™¸ìƒ ì „ìš©</span>
          </div>
          <div class="card-body">
            <ul>
              <li>ë‹¥í„°ì¹´ë€ <strong>ì˜ì‚¬ íƒ‘ìŠ¹ êµ¬ê¸‰ì°¨(physician-staffed vehicle)</strong>ì…ë‹ˆë‹¤.</li>
              <li><strong>ì¤‘ì¦ì™¸ìƒ í™˜ì</strong>ë¥¼ ì‚¬ê³ í˜„ì¥ì´ë‚˜ ìµœì´ˆë³‘ì›ìœ¼ë¡œë¶€í„° ê¸¸ë³‘ì›ìœ¼ë¡œ ì´ì†¡í•©ë‹ˆë‹¤.</li>
              <li>ë‹¥í„°ì¹´ëŠ” <strong>ì¸ì²œê¶Œì—­ ì™¸ìƒì„¼í„°(ê¸¸ë³‘ì›) ì†Œì†</strong>ì…ë‹ˆë‹¤.</li>
              <li><strong>ì™¸ìƒì™¸ê³¼ ì „ë¬¸ì˜ê°€ ì§ì ‘ íƒ‘ìŠ¹</strong>í•©ë‹ˆë‹¤.</li>
            </ul>
          </div>
        </article>
      </section>

<section id="who" class="info-section">
        <div class="section-label">Who</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ìš”ì²­ ì£¼ì²´</h2>
        <article class="card">
          <div class="card-header">
            <h3 class="card-title">ëˆ„ê°€ ìš”ì²­í•  ìˆ˜ ìˆë‚˜ìš”?</h3>
            <span class="card-chip">ëŒ€ìƒ</span>
          </div>
          <div class="card-body">
            <p>ë‹¤ìŒ ì˜ë£Œì§„ì´ë¼ë©´ ëˆ„êµ¬ë‚˜ ë‹¥í„°ì¹´ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
            <div class="pill-row">
              <span class="pill">ğŸš’ 119 êµ¬ê¸‰ëŒ€ì›</span>
              <span class="pill">ğŸ¥ ëª¨ë“  ë³‘ì˜ì› ì˜ì‚¬</span>
            </div>
          </div>
        </article>
      </section>

<section id="how" class="info-section">
        <div class="section-label">How</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ìš”ì²­ ë°©ë²•</h2>
        <article class="card">
          <div class="card-header">
            <h3 class="card-title">1ë‹¨ê³„: ì „í™” í•œ í†µ</h3>
            <span class="card-chip">24ì‹œê°„ 365ì¼</span>
          </div>
          <div class="card-body">
            <p><strong>â–¶ ê¸¸ë³‘ì› ì™¸ìƒë‹¹ì§í°ìœ¼ë¡œ ì „í™”ì£¼ì„¸ìš”.</strong><br /><small>(24ì‹œê°„ 365ì¼ ì—°ì¤‘ë¬´íœ´)</small></p>

            <button type="button" class="call-btn-full call-btn" data-tel="01062063010" data-call-target="how_doctorcar">
              <span class="call-icon">ğŸ“</span>
              <span class="call-title">ë‹¥í„°ì¹´ ë°”ë¡œ ìš”ì²­</span>
              <span class="call-sub">ê¸¸ë³‘ì› ì™¸ìƒë‹¹ì§í° Â· 24ì‹œê°„ 365ì¼</span>
            </button>

            <p class="request-warning bottom-warning">
              â€» ë‹¥í„°ì¹´ ì¶œë™ ìš”ì²­ì€ <strong>119 êµ¬ê¸‰ëŒ€ì› ë° ì˜ë£Œì§„</strong>ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
              ì¼ë°˜ì¸ì˜ ì§ì ‘ ìš”ì²­ì€ <strong>ë¶ˆê°€</strong>í•©ë‹ˆë‹¤.
            </p>

            <div class="highlight">
              ğŸ“ ì „í™” ì—°ê²° ì‹œ<br />
              Â· <strong>í™˜ì ë‚˜ì´ / ì„±ë³„</strong><br />
              Â· <strong>ì‚¬ê³  ì‹œê°ê³¼ ê¸°ì „</strong> (ì¶”ë½, êµí†µì‚¬ê³ , ì••ê¶¤ ë“±)<br />
              Â· <strong>í˜„ì¬ ìƒíƒœ</strong> (í˜ˆì••, í˜¸í¡, ì˜ì‹ìƒíƒœ)<br />
              Â· <strong>í˜„ ìœ„ì¹˜Â·ë³‘ì›ëª…</strong><br />
              ì„ ê°„ë‹¨íˆ ë§ì”€í•´ì£¼ì‹œë©´, ë³´ë‹¤ ë¹ ë¥´ê²Œ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
          </div>
        </article>
      </section>

<section id="when" class="info-section">
        <div class="section-label">When</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ìš”ì²­ ì‹œì </h2>
        <article class="card">
          <div class="card-header">
            <h3 class="card-title">ì–¸ì œ ì—°ë½í•´ì•¼ í•˜ë‚˜ìš”?</h3>
            <span class="card-chip">â€œì§€ê¸ˆ ë°”ë¡œâ€</span>
          </div>
          <div class="card-body">
            <ul>
              <li><strong>ì§€ê¸ˆ ë°”ë¡œ ì¦‰ì‹œ</strong> ì—°ë½ ì£¼ì„¸ìš”.</li>
              <li>ë‹¤ìŒ ì‹œì  ì–´ë””ì„œë“  ê°€ëŠ¥í•©ë‹ˆë‹¤.</li>
            </ul>
            <div class="pill-row">
              <span class="pill secondary">í™˜ìì ‘ì´‰ ì „</span>
              <span class="pill secondary">í™˜ìì ‘ì´‰ í›„</span>
              <span class="pill secondary">ë³‘ì›ë„ì°© ì „</span>
              <span class="pill secondary">ë³‘ì›ë„ì°© ì§í›„</span>
            </div>
            <div class="highlight">
              â± <strong>ë¹ ë¥´ê²Œ ì—°ë½ì£¼ì‹¤ìˆ˜ë¡ í™˜ìì˜ ê³¨ë“ ì•„ì›Œë¥¼ ì§€í‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong><br />
              ğŸ“Œ <strong>CTë¥¼ ì°ê¸° ì „ì—</strong> ë¨¼ì € ì—°ë½ ì£¼ì‹œë©´, ë‹¥í„°ì¹´Â·ìˆ˜ìˆ Â·í˜ˆì•¡ ë“± ì „ì²´ ì „ëµì„ í•¨ê»˜ ê³„íší•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </div>
          </div>
        </article>
      </section>

<section id="decision" class="info-section">
        <div class="section-label">Decision</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ì¶œë™ ê²°ì •</h2>
        <article class="card">
          <div class="card-header">
            <h3 class="card-title">ëˆ„ê°€ ì¶œë™ì„ ê²°ì •í•˜ë‚˜ìš”?</h3>
            <span class="card-chip">ì „ë¬¸ì˜ íŒë‹¨</span>
          </div>
          <div class="card-body">
            <p>
              ë‹¥í„°ì¹´ì˜ ì¶œë™ ì—¬ë¶€ëŠ” <strong>ê¸¸ë³‘ì› ì™¸ìƒì™¸ê³¼ ì „ë¬¸ì˜</strong>ê°€ í™˜ì ìƒíƒœì™€ ê±°ë¦¬, ì´ì†¡ ìƒí™© ë“±ì„ ì¢…í•©ì ìœ¼ë¡œ ê³ ë ¤í•˜ì—¬ íŒë‹¨í•©ë‹ˆë‹¤.
            </p>
            <p style="font-size:0.86rem; color:var(--text-muted); margin-top:4px;">
              â€» â€œë‹¥í„°ì¹´ê°€ ê¼­ í•„ìš”í• ì§€â€ ê³ ë¯¼ë˜ì…”ë„ ë¶€ë‹´ ì—†ì´ ì—°ë½ ì£¼ì„¸ìš”. ìƒë‹´ í›„ ì¶œë™ ì—¬ë¶€ë¥¼ í•¨ê»˜ ê²°ì •í•©ë‹ˆë‹¤.
            </p>
          </div>
        </article>
      </section>

      <div class="image-strip image-strip-g3">
        <div class="image-strip-inner">
          <div class="image-strip-title">í˜„ì¥ì—ì„œ ìˆ˜ìˆ ì‹¤ê¹Œì§€</div>
          <div class="image-strip-subtitle">ë‹¥í„°ì¹´ íŒ€ì´ í•¨ê»˜í•©ë‹ˆë‹¤.</div>
        </div>
      </div>

<section id="can-do" class="info-section">
        <div class="section-label">Scope</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ê°€ í•  ìˆ˜ ìˆëŠ” ê²ƒ</h2>
        <p class="section-description">
          ë‹¥í„°ì¹´ì—ëŠ” ì™¸ìƒì™¸ê³¼ ì „ë¬¸ì˜ê°€ íƒ‘ìŠ¹í•˜ì—¬, í˜„ì¥Â·ìµœì´ˆë³‘ì›Â·ì´ì†¡ ì¤‘ ì–´ëŠ ìƒí™©ì—ì„œë„ ë‹¤ìŒê³¼ ê°™ì€ ì‹œìˆ ê³¼ ì²˜ì¹˜ë¥¼ ì‹œí–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>

        <article class="card">
          <div class="card-header">
            <h3 class="card-title">AÂ·BÂ·C, X, ì‹œìˆ , ìˆ˜ìˆ </h3>
            <span class="card-chip">í˜„ì¥Â·ìµœì´ˆë³‘ì›Â·ë‹¥í„°ì¹´ ë‚´</span>
          </div>
          <div class="card-body">
            <p class="skills-tagline">ì¤‘ì¦ì™¸ìƒ ì´ˆê¸° ì†Œìƒë¶€í„° ì‘ê¸‰ìˆ˜ìˆ  ì „ ë‹¨ê³„ê¹Œì§€, ë‹¥í„°ì¹´ì—ì„œ ì§ì ‘ ê°œì… ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>

            <div class="skills-grid">
              <div>
                <div class="skills-label">ğŸ« A, B, C</div>
                <ul class="skills-list">
                  <li>ì´ˆìŒíŒŒ ìœ ë„ ë¼ì¸ í™•ë³´</li>
                  <li>Oí˜• ì í˜ˆêµ¬ ìˆ˜í˜ˆ</li>
                  <li>ì§„ì •ì¹˜ë£Œ</li>
                  <li>ê¸°ê´€ì‚½ê´€</li>
                </ul>
              </div>

              <div>
                <div class="skills-label">ğŸ©¸ X (ì‚¬ì§€ ì†ìƒÂ·ì¶œí˜ˆ ì¡°ì ˆ)</div>
                <ul class="skills-list">
                  <li>ì‚¬ì§€ í˜ˆê´€ í´ë¨í•‘ ë° ê²°ì°°</li>
                  <li>ì••ë°•ì§€í˜ˆ</li>
                  <li>í† ë‹ˆì¼“(tourniquet) ì ìš©</li>
                </ul>
              </div>

              <div>
                <div class="skills-label">ğŸ›  ì‹œìˆ  (Procedures)</div>
                <ul class="skills-list">
                  <li>í‰ê´€ ì‚½ê´€ (Tube thoracostomy)</li>
                  <li>Large-bore central line insertion</li>
                  <li>ëŒ€ë™ë§¥ í˜ˆê´€ë‚´ í’ì„ ì†Œìƒìˆ <br />
                    <small>(Resuscitative Endovascular Balloon Occlusion of Aorta)</small>
                  </li>
                </ul>
              </div>

              <div>
                <div class="skills-label">âš•ï¸ ìˆ˜ìˆ  (Surgical interventions)</div>
                <ul class="skills-list">
                  <li>ìœ¤ìƒê°‘ìƒë§‰ ì ˆì œìˆ </li>
                  <li>ì „ë³µë§‰ íŒ¨í‚¹</li>
                  <li>ì†Œìƒê°œí‰ìˆ </li>
                  <li>ì‘ê¸‰ ì‚¬ì§€ ì ˆë‹¨ìˆ </li>
                </ul>
              </div>
            </div>

            <div>
              <div class="skills-label">ğŸ§° Preparation (ê¸¸ë³‘ì› ë‚´ ì‚¬ì „ ì¤€ë¹„)</div>
              <ul class="skills-list">
                <li>ìˆ˜ìˆ ë°© ì¤€ë¹„</li>
                <li>ëŒ€ëŸ‰ê¸‰ì†ìˆ˜í˜ˆ ì‹œìŠ¤í…œ ì¤€ë¹„</li>
                <li>í˜ˆê´€ì¡°ì˜ìˆ (Angiography) ì¤€ë¹„</li>
                <li>í˜ˆê´€ìƒ‰ì „ìˆ (Embolization) ì¤€ë¹„</li>
              </ul>
            </div>

            <p class="footnote">
              * ìœ„ ì‹œìˆ ê³¼ ìˆ˜ìˆ ì€ <strong>ìƒí™©ì— ë”°ë¼ í˜„ì¥, ìµœì´ˆë³‘ì›, ë‹¥í„°ì¹´ ë‚´ì—ì„œ</strong> ì‹œí–‰ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
          </div>
        </article>
      </section>

      <!-- (ì´í•˜ etc/ì„¤ë¬¸/í‘¸í„°ëŠ” êµìˆ˜ë‹˜ ê¸°ì¡´ ê·¸ëŒ€ë¡œ ìœ ì§€) -->
      <section id="etc" class="etc-section">
        <div class="section-label">ë‹¥í„°ì¹´ ê¸°íƒ€</div>
        <h2 class="section-title">ë‹¥í„°ì¹´; ê¸°íƒ€</h2>

        <div style="display:flex; gap:10px; margin:16px 0;">
          <img src="images/Gdoctorcaroutside.jpg" class="etc-image-half" />
          <img src="images/Gdoctorcarinside.jpg" class="etc-image-half" />
        </div>
        <p class="etc-text">ë‹¥í„°ì¹´ì˜ ë‚´Â·ì™¸ë¶€ ëª¨ìŠµì…ë‹ˆë‹¤.</p>

        <img src="images/Gamputation.jpg" class="etc-image-amputation" />
        <p class="etc-text">
          ë‹¥í„°ì¹´ê°€ í˜„ì¥ìœ¼ë¡œ ì¶œë™í•˜ì—¬ êµ¬ì¡°ë¬¼ì— ë¼ì–´ì„œ êµ¬ì¶œí•  ìˆ˜ ì—†ëŠ” í™˜ìë¥¼ ì§„ë£Œí•˜ì˜€ìŠµë‹ˆë‹¤.<br>
          êµ¬ì¶œì— ì‹œê°„ì´ ì˜¤ë˜ ì†Œìš”ë  ê²ƒìœ¼ë¡œ íŒë‹¨ë˜ëŠ” ê²½ìš° ë‹¥í„°ì¹´ê°€ ì¶œë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>

        <div style="display:flex; gap:10px; margin:16px 0;">
          <img src="images/Gganghwa.jpg" class="etc-image-half" />
          <img src="images/Ggimpo.jpg" class="etc-image-half" />
        </div>
        <p class="etc-text">
          ê°•í™”, ê¹€í¬, ë¶€ì²œ, ê´‘ëª…, ì‹œí¥ ë“±ì§€ì—ì„œ í™˜ì ë°œìƒ ì‹œ êµ¬ê¸‰ëŒ€ì›ë‹˜ì´ ë‹¥í„°ì¹´ë¥¼ ìš”ì²­í•˜ë©´,<br>
          ì¤‘ê°„ ìœ„ì¹˜ì˜ ë³‘ì›ì´ë‚˜ ì•ˆì „í•œ ì¥ì†Œì—ì„œ ë§Œë‚˜ í™˜ìë¥¼ ë‹¥í„°ì¹´ë¡œ ì¸ê³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>

        <img src="images/Ger.jpg" class="etc-image-full" />
        <p class="etc-text">
          ì‘ê¸‰ì‹¤ ì„ ìƒë‹˜ë“¤ê»˜ì„œë„ í™˜ì ì ‘ì´‰ ì‹œ ì§€ì²´ ì—†ì´ ì—°ë½ì£¼ì‹œê¸¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br>
          Full work-upì´ ë˜ì§€ ì•Šì€ ìƒíƒœë¼ë„ ì „í™”ì£¼ì…”ë„ ê´œì°®ìŠµë‹ˆë‹¤.
        </p>

        <img src="images/Ggachon.jpg" class="etc-image-full" />
        <p class="etc-text">
          <strong>ë§ºìœ¼ë©°â€¦</strong><br><br>
          ë³‘ì› ì „ ë‹¨ê³„ì˜ í™˜ì ì´ì†¡ ë¬¸ì œëŠ” ê°œì¸ì´ í•´ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
          <strong>ê¸¸ë³‘ì› ì™¸ìƒì„¼í„°ë„, ì§€ì—­Â·ê¶Œì—­ ì‘ê¸‰ì„¼í„°ë„ í˜¼ìì„œëŠ” í•´ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</strong><br><br>
          ëª¨ë‘ì˜ ê´€ì‹¬ê³¼ ê±°ë²„ë„ŒìŠ¤, ì‹œìŠ¤í…œ í™•ë¦½ê³¼ ê¸´ë°€í•œ ì†Œí†µì´ í•„ìš”í•©ë‹ˆë‹¤.<br>
          í•¨ê»˜ í˜ì¨ì£¼ì‹ ë‹¤ë©´ ë°˜ë“œì‹œ ë” ë‚˜ì€ ê²°ê³¼ë¡œ ë³´ë‹µí•˜ê² ìŠµë‹ˆë‹¤.<br><br>
          ë³´ë‹¤ ì•ˆì „í•˜ê³  ì²´ê³„ì ì¸ ì™¸ìƒí™˜ì ì´ì†¡ì„ ìœ„í•´<br>
          ê¸¸ë³‘ì› ì™¸ìƒì„¼í„° ë‹¥í„°ì¹´ê°€ ì•ì¥ì„œê² ìŠµë‹ˆë‹¤.<br>
          ê°ì‚¬í•©ë‹ˆë‹¤.
        </p>
      </section>

      <section id="survey" class="etc-section">
        <div class="section-label">Survey</div>
        <h2 class="section-title">ë‹¥í„°ì¹´ ì›¹ ì‚¬ìš© ê²½í—˜ ì„¤ë¬¸</h2>
        <p class="section-description">
          1ë¶„ ì •ë„ ì†Œìš”ë©ë‹ˆë‹¤. ì‘ë‹µì€ í†µê³„Â·ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë˜ë©°, ê°œë³„ ì‘ë‹µìëŠ” ì‹ë³„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
        </p>
        <!-- êµìˆ˜ë‹˜ ì›ë³¸ ì„¤ë¬¸ í¼ ê·¸ëŒ€ë¡œ ìœ ì§€ -->
       <form id="doctorcar-survey" class="card" style="margin-top:10px;">
        <!-- ê·¼ë¬´ê¸°ê´€ ìœ í˜• -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ê·¼ë¬´ê¸°ê´€ ìœ í˜•</h3>
          <div>
            <label><input type="radio" name="org_type" value="ems_fire" required> 119 êµ¬ê¸‰ëŒ€ / ì†Œë°©ì„œ</label><br>
            <label><input type="radio" name="org_type" value="regional_trauma"> ê¶Œì—­ì™¸ìƒì„¼í„°</label><br>
            <label><input type="radio" name="org_type" value="regional_ed"> ê¶Œì—­ì‘ê¸‰ì˜ë£Œì„¼í„°</label><br>
            <label><input type="radio" name="org_type" value="local_ed"> ì§€ì—­ì‘ê¸‰ì˜ë£Œì„¼í„°</label><br>
            <label><input type="radio" name="org_type" value="local_emi"> ì§€ì—­ì‘ê¸‰ì˜ë£Œê¸°ê´€</label><br>
            <label><input type="radio" name="org_type" value="clinic_no_ed"> ë³‘ì˜ì›(ì‘ê¸‰ì‹¤ ì—†ìŒ)</label><br>
            <label><input type="radio" name="org_type" value="other_org"> ê¸°íƒ€</label>
            <!-- ê¸°íƒ€ì¼ ë•Œë§Œ ë³´ì´ëŠ” ì…ë ¥ì°½ -->
            <div id="org_type_other_wrap" style="display:none; margin-top:6px;">
              <input type="text" name="org_type_other_text"
                     placeholder="ê¸°íƒ€ì¸ ê²½ìš° ê·¼ë¬´ê¸°ê´€ ìœ í˜•ì„ ì ì–´ ì£¼ì„¸ìš”"
                     style="width:100%; font-size:0.85rem; padding:6px 8px;">
            </div>
          </div>
        </div>

        <!-- ì„ìƒ ê²½ë ¥ -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ì„ìƒ ê²½ë ¥</h3>
          <div>
            <label><input type="radio" name="career_years" value="0-1" required> 0â€“1ë…„</label><br>
            <label><input type="radio" name="career_years" value="2-5"> 2â€“5ë…„</label><br>
            <label><input type="radio" name="career_years" value="6-10"> 6â€“10ë…„</label><br>
            <label><input type="radio" name="career_years" value="11+"> 11ë…„ ì´ìƒ</label>
          </div>
        </div>

        <!-- ê·¼ë¬´ì§€ì—­ -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ê·¼ë¬´ì§€ì—­</h3>
          <div>
            <label><input type="radio" name="region" value="incheon" required> ì¸ì²œ</label><br>
            <label><input type="radio" name="region" value="gyeonggi_west"> ê²½ê¸° ì„œë¶€(ê¹€í¬Â·ë¶€ì²œÂ·ê´‘ëª…Â·ì‹œí¥ ë“±)</label><br>
            <label><input type="radio" name="region" value="seoul"> ì„œìš¸</label><br>
            <label><input type="radio" name="region" value="other_region"> ê¸°íƒ€</label><br>
            <div id="region_other_wrap" style="display:none; margin-top:6px;">
              <input type="text" name="region_other_text"
                     placeholder="ê¸°íƒ€ì¸ ê²½ìš° ê·¼ë¬´ì§€ì—­ì„ ì ì–´ ì£¼ì„¸ìš”"
                     style="width:100%; font-size:0.85rem; padding:6px 8px;">
            </div>
          </div>
        </div>

        <!-- ë°©ë¬¸ ëª©ì  -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ë°©ë¬¸ ëª©ì </h3>
          <div>
            <label><input type="radio" name="visit_purpose" value="real_case" required> ì‹¤ì œ í™˜ì ë°œìƒ</label><br>
            <label><input type="radio" name="visit_purpose" value="info_view"> í™ë³´ë¬¼Â·ë‚´ìš© ì—´ëŒ</label><br>
            <label><input type="radio" name="visit_purpose" value="education_sim"> êµìœ¡Â·ì‹œë®¬ë ˆì´ì…˜</label><br>
            <label><input type="radio" name="visit_purpose" value="other"> ê¸°íƒ€</label><br>
            <div id="visit_purpose_other_wrap" style="display:none; margin-top:6px;">
              <input type="text" name="visit_purpose_other_text"
                     placeholder="ê¸°íƒ€ì¸ ê²½ìš° ë‚´ìš©ì„ ì ì–´ ì£¼ì„¸ìš”"
                     style="width:100%; font-size:0.85rem; padding:6px 8px;">
            </div>
          </div>
        </div>

        <!-- ë‹¥í„°ì¹´ ì›¹ì´ ì˜ì‚¬ê²°ì •ì— ë¯¸ì¹œ ì˜í–¥ (ë³µìˆ˜ ì„ íƒ) -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ë‹¥í„°ì¹´ ì›¹ì´ ì˜ì‚¬ê²°ì •ì— ë¯¸ì¹œ ì˜í–¥ (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</h3>
          <div>
            <label><input type="checkbox" name="decision_impact" value="easier_call"> ë‹¥í„°ì¹´(ê¶Œì—­ì™¸ìƒ)ì— ë” ì‰½ê²Œ ì „í™” í•˜ê²Œ ë¨</label><br>
            <label><input type="checkbox" name="decision_impact" value="earlier_request"> ë‹¥í„°ì¹´ ìš”ì²­ ì‹œì ì´ ë¹¨ë¼ì§</label><br>
            <label><input type="checkbox" name="decision_impact" value="hospital_selection"> ë³‘ì›(ì „ì›/ìˆ˜ìš©) ì„ ì •ì— ë„ì›€ì´ ë¨</label><br>
            <label><input type="checkbox" name="decision_impact" value="meeting_place"> ë§Œë‚¨ ì¥ì†Œ ê²°ì •ì— ë„ì›€ì´ ë¨</label><br>
            <label><input type="checkbox" name="decision_impact" value="knowledge_gain"> ì™¸ìƒí™˜ì ì²˜ì¹˜ ë° ì´ì†¡ì— ëŒ€í•œ ì§€ì‹ì´ ëŠ˜ê²Œë¨</label><br>
            <label><input type="checkbox" name="decision_impact" value="no_effect"> ì•„ì§ ì˜í–¥ ì—†ìŒ / ì˜ ëª¨ë¥´ê² ìŒ</label>
          </div>
        </div>

        <!-- ì›¹ì´ ì˜ì‚¬ê²°ì •ì— ì–¼ë§ˆë‚˜ ë„ì›€ì´ ë˜ì—ˆëŠ”ê°€ (1~5) -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ì›¹ì´ ì˜ì‚¬ê²°ì •ì— ì–¼ë§ˆë‚˜ ë„ì›€ì´ ë˜ì—ˆëŠ”ê°€</h3>
          <select name="decision_help_score" required
                  style="width:100%; padding:6px 8px; font-size:0.9rem;">
            <option value="">ì„ íƒí•´ ì£¼ì„¸ìš”</option>
            <option value="1">1 - ì „í˜€ ë„ì›€ì´ ë˜ì§€ ì•Šì•˜ë‹¤</option>
            <option value="2">2 - ì¡°ê¸ˆ ë„ì›€ì´ ë˜ì—ˆë‹¤</option>
            <option value="3">3 - ë³´í†µì´ë‹¤</option>
            <option value="4">4 - ê½¤ ë„ì›€ì´ ë˜ì—ˆë‹¤</option>
            <option value="5">5 - ë§¤ìš° ë„ì›€ì´ ë˜ì—ˆë‹¤</option>
          </select>
        </div>

        <!-- ë‹¥í„°ì¹´ ì‹¤ì œ ì´ìš© ê²½í—˜ + ë³´ë¼ìƒ‰ ë¸”ë¡ -->
        <div class="card-body experience-wrapper">
          <h3 class="card-title experience-title" style="margin-bottom:4px;">ë‹¥í„°ì¹´ ì‹¤ì œ ì´ìš© ê²½í—˜</h3>
          <div>
            <label><input type="radio" name="used_doctorcar" value="yes" required> ì˜ˆ (ê¸¸ë³‘ì› ë‹¥í„°ì¹´ë¥¼ ì‹¤ì œë¡œ ì´ìš©í•œ ê²½í—˜ì´ ìˆë‹¤)</label><br>
            <label><input type="radio" name="used_doctorcar" value="no"> ì•„ë‹ˆì˜¤ (ì•„ì§ ì‹¤ì œë¡œ ì‚¬ìš©í•´ ë³¸ ì ì€ ì—†ë‹¤)</label>
          </div>
        </div>

        <!-- ìª¼ë¥´ë¥µ í¼ì³ì§€ëŠ” ê²½í—˜ ìƒì„¸ ë¸”ë¡ -->
        <div id="doctorcar-experience-block">
          <div class="experience-note">
            â€» ì•„ë˜ í•­ëª©ë“¤ì€ â€œì˜ˆâ€ë¥¼ ì„ íƒí•œ ê²½ìš°ì—ë§Œ ë‹µë³€í•´ ì£¼ì„¸ìš”.
          </div>
          <!-- ì‹œê°„ ë‹¨ì¶• ì²´ê° -->
          <div class="exp-sub-card">
            <h4>ì‹œê°„ ë‹¨ì¶• ì²´ê° (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</h4>
            <label><input type="checkbox" name="time_effect" value="shorter_contact"> í™˜ìâ€“ì˜ì‚¬ ì ‘ì´‰ ì‹œê°„ì´ ì¤„ì–´ë“¤ì—ˆë‹¤ê³  ëŠë‚€ë‹¤</label>
            <label><input type="checkbox" name="time_effect" value="shorter_lookup"> ì—°ë½ì²˜ ì°¾ëŠ” ì‹œê°„ì´ ì¤„ì–´ë“¦</label>
            <label><input type="checkbox" name="time_effect" value="shorter_total"> ì „ì²´ ì´ì†¡ ì‹œê°„ì´ ë‹¨ì¶•ë˜ì—ˆë‹¤</label>
            <label><input type="checkbox" name="time_effect" value="longer_total"> ì „ì²´ ì´ì†¡ ì‹œê°„ì´ ì˜¤íˆë ¤ ëŠ˜ì—ˆë‹¤</label>
            <label><input type="checkbox" name="time_effect" value="no_change"> ì˜ ëª¨ë¥´ê² ìŒ / ë¹„ìŠ·í•¨</label>
          </div>

          <!-- í™˜ì ì²˜ì¹˜ ì–´ë–¤ ë¶€ë¶„ì´ ì¢‹ì•˜ëŠ”ê°€ -->
          <div class="exp-sub-card">
            <h4>ì–´ë–¤ ì²˜ì¹˜ê°€ ë„ì›€ì´ ë˜ì—ˆë‚˜ìš”? (ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥)</h4>
            <label><input type="checkbox" name="treatment_good" value="X"> X (Bleeding Control)</label>
            <label><input type="checkbox" name="treatment_good" value="AB"> A,B (ê¸°ë„ê´€ë¦¬)</label>
            <label><input type="checkbox" name="treatment_good" value="C"> C (Circulation; ìˆ˜ì•¡/ìˆ˜í˜ˆ/ìŠ¹ì••ì œ)</label>
          </div>

          <!-- ë‹¥í„°ì¹´ ì²˜ì¹˜ ì¢‹ì•˜ë˜ ì  ììœ  ì„œìˆ  -->
          <div class="exp-sub-card">
            <h4>ë‹¥í„°ì¹´ ì²˜ì¹˜ ì¤‘ ì¢‹ì•˜ë˜ ì  (ìˆë‹¤ë©´)</h4>
            <textarea name="treatment_free_text"
                      id="treatment_free_text"
                      placeholder="ì˜ˆ: ì¶œí˜ˆ ì¡°ì ˆ, tourniquet, í˜„ì¥ ì²˜ì¹˜ ë“± ì¢‹ì•˜ë˜ ì ì„ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”. (ìµœëŒ€ 100ì)"
                      rows="3"
                      maxlength="100"
                      style="width:100%; font-size:0.9rem; padding:6px 8px;"></textarea>
            <div id="treatment_free_counter"
                 style="font-size:0.78rem; color:#666; text-align:right; margin-top:2px;">
              0 / 100ì
            </div>
          </div>
        </div>

        <!-- ì¬ì‚¬ìš© ì˜í–¥ -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px; margin-top:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ë‹¥í„°ì¹´ ë° ì›¹ì•± ì¬ì‚¬ìš© ì˜í–¥ (1=ì „í˜€, 5=ë§¤ìš° ê·¸ë ‡ë‹¤)</h3>
          <select name="reuse_intent" required
                  style="width:100%; padding:6px 8px; font-size:0.9rem;">
            <option value="">ì„ íƒí•´ ì£¼ì„¸ìš”</option>
            <option value="1">1 ì „í˜€ ê·¸ë ‡ì§€ ì•Šë‹¤</option>
            <option value="2">2 ì¡°ê¸ˆ ê·¸ë ‡ë‹¤</option>
            <option value="3">3 ë³´í†µì´ë‹¤</option>
            <option value="4">4 ê½¤ ê·¸ë ‡ë‹¤</option>
            <option value="5">5 ë§¤ìš° ê·¸ë ‡ë‹¤</option>
          </select>
        </div>

        <!-- ì¶”ì²œ ì˜í–¥ (NPS) -->
        <div class="card-body" style="border-bottom:1px solid #eee; padding-bottom:10px; margin-bottom:10px;">
          <h3 class="card-title" style="margin-bottom:6px;">ì¶”ì²œ ì˜í–¥ (0~10ì , NPS)</h3>
          <select name="nps_score" required
                  style="width:100%; padding:6px 8px; font-size:0.9rem;">
            <option value="">ì„ íƒí•´ ì£¼ì„¸ìš”</option>
            <option value="0">0 ì „í˜€ ì¶”ì²œí•˜ì§€ ì•Šê² ë‹¤</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10 ì ê·¹ì ìœ¼ë¡œ ì¶”ì²œí•˜ê² ë‹¤</option>
          </select>
        </div>

        <!-- ê°œì„ ì  / ì‚¬ë¡€ -->
        <div class="card-body" style="margin-bottom:4px;">
          <h3 class="card-title" style="margin-bottom:6px;">ê°œì„ ì  ë˜ëŠ” ì‹¤ì œ ë„ì›€ì´ ë˜ì—ˆë˜ ì‚¬ë¡€ê°€ ìˆë‹¤ë©´ ì…ë ¥í•´ì£¼ì„¸ìš”</h3>
          <textarea name="improvement_free_text"
                    id="improvement_free_text"
                    placeholder="ì›¹ì•±/ë‹¥í„°ì¹´ ì‹œìŠ¤í…œì˜ ê°œì„ ì , ì‹¤ì œë¡œ ë„ì›€ì´ ë˜ì—ˆë˜ ìƒí™© ë“±ì„ ì ì–´ì£¼ì„¸ìš”. (ìµœëŒ€ 100ì)"
                    rows="3"
                    maxlength="100"
                    style="width:100%; font-size:0.9rem; padding:6px 8px;"></textarea>
          <div id="improvement_free_counter"
               style="font-size:0.78rem; color:#666; text-align:right; margin-top:2px;">
            0 / 100ì
          </div>
        </div>

        <!-- ì œì¶œ ë²„íŠ¼ -->
        <div style="text-align:center; margin-top:12px;">
          <button type="submit"
                  style="padding:10px 18px; border-radius:999px; border:none; background:#0b7ac4; color:#fff; font-size:0.95rem;">
            ì„¤ë¬¸ ì œì¶œí•˜ê¸°
          </button>
        </div>
      </form>
    </section>


    </main>

    <footer style="margin-top:40px; text-align:center; font-size:0.78rem; color:#666;">
      <span>Â© Gachon University Gil Medical Center â€“ Incheon Regional Trauma Center</span>
      <span>Department of Trauma Surgery Â· Doctor Car Team</span>
      <span>Correspondence: blanc7654@gmail.com (Jaeik Jang, MD)</span>
    </footer>
  </div>

  <!-- âœ… ì§€ë„ í¬ê²Œë³´ê¸° ëª¨ë‹¬ -->
  <div id="map-modal">
    <div class="modal-inner">
      <div class="modal-topbar">
        <div class="modal-title">ì£¼ë³€ ë³‘ì› ì§€ë„ (í¬ê²Œë³´ê¸°)</div>
        <button type="button" class="modal-close" id="close-map-modal-btn">ë‹«ê¸° âœ•</button>
      </div>
      <div id="modal-map"></div>
    </div>
  </div>

  <!-- ì¶œì‹  ì„ íƒ ì˜¤ë²„ë ˆì´ (ì›ë³¸ ìœ ì§€) -->
  <div id="role-overlay" style="
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
  ">
    <div style="
      background:#fff;
      padding:20px;
      border-radius:12px;
      width:320px;
      max-width:90%;
      text-align:center;
    ">
      <h3 style="margin-bottom:12px; font-size:18px;">ì¶œì‹ ì„ ì„ íƒí•´ ì£¼ì„¸ìš”</h3>
      <div style="text-align:left; margin-bottom:16px; font-size:15px; line-height:1.6;">
        <label><input type="radio" name="user_role" value="er_doctor"> ğŸ©º ì˜ì‚¬</label><br>
        <label><input type="radio" name="user_role" value="ems"> ğŸš‘ êµ¬ê¸‰ëŒ€ì›</label><br>
        <label>
          <input type="radio" name="user_role" value="other">
          ê¸°íƒ€ (â€» ì˜ì‚¬ì™€ êµ¬ê¸‰ëŒ€ì› ì´ì™¸ì—ëŠ” ì „í™” ìš”ì²­ì´ ë¶ˆê°€í•©ë‹ˆë‹¤)
        </label>
      </div>
      <button type="button" onclick="confirmRoleAndCall()" style="width:100%; padding:10px; border-radius:999px; background:#0b7ac4; color:#fff; font-size:15px;">
        í™•ì¸ í›„ ì „í™”í•˜ê¸°
      </button>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(reg => console.log('Service Worker registered:', reg.scope))
          .catch(err => console.log('SW registration failed:', err));
      });
    }

    const doctorcarUrl = 'https://blanc7654.github.io/doctorcar/';
    let pendingCall = null;
    let currentUserRole = null;
    let trafficInfo = null;
    let roleOverlayOpen = false;
    let deferredPrompt = null;
    let CURRENT_INFO_WINDOW = null;

    // âœ… ë‚´ ìœ„ì¹˜(GPS) / í™˜ìë°œìƒì§€(ìˆ˜ë™) ìƒíƒœ
    let USER_POS = null;
    let USER_ADDR = null;
    let PATIENT_POS = null;
    let PATIENT_ADDR = null;
    let GPS_PENDING = false;
    let HOSPITAL_MAP = null;
    let USER_MARKER = null;
    let USER_LABEL = null;
    let PATIENT_MARKER = null;
    let PATIENT_LABEL = null;

    // ê¸¸ë³‘ì› ì¢Œí‘œ
    const GIL_COORD = { lat: 37.448344, lng: 126.701847 };

    // Kakao Mobility Directions REST API í‚¤
    const KAKAO_DIRECTIONS_KEY = '15c28ebb75dda243548737ac615a5681';

    // âœ… (ìœ í‹¸) ì•ˆì „í•œ í…ìŠ¤íŠ¸ ì‚½ì…
    function esc(s) {
      return String(s || '').replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }

    // âœ… Kakao Mobility Directions APIë¡œ ìë™ì°¨ ê±°ë¦¬/ì‹œê°„ ìš”ì•½
    async function fetchDriveSummary(fromLatLng, toLatLng) {
      if (!fromLatLng || !toLatLng) return null;

      const origin = `${fromLatLng.getLng()},${fromLatLng.getLat()}`;
      const destination = `${toLatLng.getLng()},${toLatLng.getLat()}`;
      const url = `https://apis-navi.kakaomobility.com/v1/directions?origin=${origin}&destination=${destination}`;

      try {
        const res = await fetch(url, {
          method: 'GET',
          headers: { Authorization: `KakaoAK ${KAKAO_DIRECTIONS_KEY}` }
        });

        if (!res.ok) {
          console.warn('Directions API error:', res.status);
          return null;
        }

        const data = await res.json();
        if (!data.routes || !data.routes.length) return null;

        const summary = data.routes[0].summary;
        const distanceKm = (summary.distance / 1000).toFixed(1);
        const durationMin = Math.round(summary.duration / 60);

        return { distanceKm, durationMin };
      } catch (e) {
        console.error('Directions fetch error:', e);
        return null;
      }
    }

    // âœ… ì—­ì§€ì˜¤ì½”ë”©: ì¢Œí‘œ â†’ ì£¼ì†Œ
    function reverseGeocode(latLng, cb) {
      try {
        const geocoder = new kakao.maps.services.Geocoder();
        geocoder.coord2Address(latLng.getLng(), latLng.getLat(), (result, status) => {
          if (status !== kakao.maps.services.Status.OK || !result || !result.length) {
            cb(null);
            return;
          }
          const r = result[0];
          const addr = (r.road_address && r.road_address.address_name) || (r.address && r.address.address_name) || null;
          cb(addr);
        });
      } catch (e) {
        console.warn('reverseGeocode error:', e);
        cb(null);
      }
    }

    function showGpsAddress(addrText) {
      const el = document.getElementById('gps-address-map');
      if (!el) return;

      const html = addrText
        ? `í˜„ì¬ ìœ„ì¹˜ ì£¼ì†Œ: <b>${esc(addrText)}</b>`
        : `í˜„ì¬ ìœ„ì¹˜ ì£¼ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.`;

      el.innerHTML = html;
      el.style.display = 'block';
    }

function formatTel(tel) {
  const t = String(tel || '').trim();
  if (!t) return null;
  return t;
}

// âœ… CustomOverlay ê¸°ë°˜ ETA íŒì—…
let CURRENT_ETA_OVERLAY = null;

function closeEtaOverlay(){
  if (CURRENT_ETA_OVERLAY) {
    CURRENT_ETA_OVERLAY.setMap(null);
    CURRENT_ETA_OVERLAY = null;
  }
}

async function showEtaPopup(map, toLatLng, targetName, targetTel) {
  closeEtaOverlay();

  const baseHtml = `
    <div class="eta-pop">
      <div class="eta-pop-head">
        <div class="eta-pop-title">${esc(targetName || 'ëŒ€ìƒ')}</div>
        <button class="eta-pop-close" onclick="window._closeEtaPopup()">ë‹«ê¸°</button>
      </div>
      <div class="eta-pop-body">ì†Œìš”ì‹œê°„ ê³„ì‚° ì¤‘...</div>
    </div>
  `;

  const overlay = new kakao.maps.CustomOverlay({
    position: toLatLng,
    yAnchor: 1.25,
    content: baseHtml,
    clickable: true
  });

  overlay.setMap(map);
  CURRENT_ETA_OVERLAY = overlay;

  window._closeEtaPopup = closeEtaOverlay;

  if (!USER_POS && !PATIENT_POS) {
    overlay.setContent(`
      <div class="eta-pop">
        <div class="eta-pop-head">
          <div class="eta-pop-title">${esc(targetName || 'ëŒ€ìƒ')}</div>
          <button class="eta-pop-close" onclick="window._closeEtaPopup()">ë‹«ê¸°</button>
        </div>
        <div class="eta-pop-body" style="color:#c62828;font-weight:900;">
          í˜„ì¬ ìœ„ì¹˜(GPS) ë˜ëŠ” í™˜ìë°œìƒì§€ë¥¼ ë¨¼ì € ì§€ì •í•´ ì£¼ì„¸ìš”.
        </div>
      </div>
    `);
    return;
  }

  const lines = [];

  if (USER_POS) {
    const s1 = await fetchDriveSummary(USER_POS, toLatLng);
    if (s1) lines.push(`
      <div class="eta-row">
        <div class="eta-left eta-from-gps">í˜„ì¬ìœ„ì¹˜ë¡œë¶€í„°</div>
        <div class="eta-right">(${s1.distanceKm}km, ${s1.durationMin}ë¶„)</div>
      </div>
    `);
    else lines.push(`<div style="margin:4px 0;color:#c62828;font-weight:900;">í˜„ì¬ìœ„ì¹˜ ê³„ì‚° ì‹¤íŒ¨</div>`);
  }

  if (PATIENT_POS) {
    const s2 = await fetchDriveSummary(PATIENT_POS, toLatLng);
    if (s2) lines.push(`
      <div class="eta-row">
        <div class="eta-left eta-from-patient">í™˜ìë°œìƒì§€ë¡œë¶€í„°</div>
        <div class="eta-right">(${s2.distanceKm}km, ${s2.durationMin}ë¶„)</div>
      </div>
    `);
    else lines.push(`<div style="margin:4px 0;color:#d81b60;font-weight:900;">í™˜ìë°œìƒì§€ ê³„ì‚° ì‹¤íŒ¨</div>`);
  }

  const tel = formatTel(targetTel);
  const telHtml = tel ? `
    <div class="eta-phone">
      â˜ <a href="tel:${esc(tel)}">${esc(tel)}</a>
    </div>
  ` : ``;

  overlay.setContent(`
    <div class="eta-pop">
      <div class="eta-pop-head">
        <div class="eta-pop-title">${esc(targetName || 'ëŒ€ìƒ')}</div>
        <button class="eta-pop-close" onclick="window._closeEtaPopup()">ë‹«ê¸°</button>
      </div>
      <div class="eta-pop-body">
        ${lines.join('')}
        ${telHtml}
      </div>
    </div>
  `);
}


    // âœ… í´ë¦­í•œ ëŒ€ìƒ(ë³‘ì›/ê¸¸ë³‘ì›) ìœ„ì¹˜ë¡œ: (í˜„ì¬ìœ„ì¹˜/í™˜ìë°œìƒì§€) ê°ê° ETA í‘œì‹œ + ì•„ë˜ì— ì „í™”ë²ˆí˜¸
    async function showEtaInfoWindow(map, markerForOpen, toLatLng, targetName, targetTel) {
      if (CURRENT_INFO_WINDOW) {
        CURRENT_INFO_WINDOW.close();
        CURRENT_INFO_WINDOW = null;
      }

      const infoWindow = new kakao.maps.InfoWindow({ removable: true });

      infoWindow.setContent(`
        <div style="padding:8px 10px;font-size:12px;">
          <div style="font-weight:700;margin-bottom:4px;">${esc(targetName || 'ëŒ€ìƒ')}</div>
          <div>ì†Œìš”ì‹œê°„ ê³„ì‚° ì¤‘...</div>
        </div>
      `);
      infoWindow.open(map, markerForOpen);
      CURRENT_INFO_WINDOW = infoWindow;

      if (!USER_POS && !PATIENT_POS) {
        infoWindow.setContent(`
          <div style="padding:8px 10px;font-size:12px; line-height:1.35;">
            <div style="font-weight:700;margin-bottom:4px;">${esc(targetName || 'ëŒ€ìƒ')}</div>
            <div style="color:#c62828;"><b>í˜„ì¬ ìœ„ì¹˜(GPS)</b> ë˜ëŠ” <b style="color:#d81b60;">í™˜ìë°œìƒì§€</b>ë¥¼ ë¨¼ì € ì§€ì •í•´ ì£¼ì„¸ìš”.</div>
          </div>
        `);
        return;
      }

      const lines = [];

      // âœ… í´ë¦­ ìˆœê°„ì—ë§Œ ê³„ì‚°
      if (USER_POS) {
        const s1 = await fetchDriveSummary(USER_POS, toLatLng);
if (s1) lines.push(`
  <div class="iw-row">
    <div class="iw-left iw-from-gps">í˜„ì¬ìœ„ì¹˜ë¡œë¶€í„°</div>
    <div class="iw-right">(${s1.distanceKm}km, ${s1.durationMin}ë¶„)</div>
  </div>
`);
        else lines.push(`<div style="margin:2px 0; color:#c62828;">í˜„ì¬ìœ„ì¹˜ë¡œë¶€í„° ì†Œìš”ì‹œê°„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</div>`);
      }

      if (PATIENT_POS) {
        const s2 = await fetchDriveSummary(PATIENT_POS, toLatLng);
if (s2) lines.push(`
  <div class="iw-row">
    <div class="iw-left iw-from-patient">í™˜ìë°œìƒì§€ë¡œë¶€í„°</div>
    <div class="iw-right">(${s2.distanceKm}km, ${s2.durationMin}ë¶„)</div>
  </div>
`);
        else lines.push(`<div style="margin:2px 0; color:#d81b60;">í™˜ìë°œìƒì§€ë¡œë¶€í„° ì†Œìš”ì‹œê°„ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</div>`);
      }

const tel = formatTel(targetTel);
const telHtml = tel ? `
  <div class="iw-phone">
    â˜ <a href="tel:${esc(tel)}"><b>${esc(tel)}</b></a>
  </div>
` : ``;

infoWindow.setContent(`
  <div class="iw-wrap">
    <div class="iw-title">${esc(targetName || 'ëŒ€ìƒ')}</div>
    ${lines.join('')}
    ${telHtml}
  </div>
`);
    }

    // âœ… ë‚´ ìœ„ì¹˜ í‘œì‹œ (ë¹¨ê°„ ë¼ë²¨)
    function renderUserOnMap(map) {
      if (!USER_POS || !map) return;

      if (USER_MARKER && map === HOSPITAL_MAP) USER_MARKER.setMap(null);
      if (USER_LABEL && map === HOSPITAL_MAP) USER_LABEL.setMap(null);

      const m = new kakao.maps.Marker({ map, position: USER_POS });

      const label = new kakao.maps.CustomOverlay({
        position: USER_POS,
        yAnchor: 1.4,
        content: `<div class="marker-label user">ğŸ“ í˜„ì¬ ìœ„ì¹˜</div>`
      });
      label.setMap(map);

      if (map === HOSPITAL_MAP) {
        USER_MARKER = m;
        USER_LABEL = label;
      }
    }

    // âœ… í™˜ìë°œìƒì§€ í‘œì‹œ (í•‘í¬ â­ ë¼ë²¨)
    function renderPatientOnMap(map) {
      if (!PATIENT_POS || !map) return;

      if (PATIENT_MARKER && map === HOSPITAL_MAP) PATIENT_MARKER.setMap(null);
      if (PATIENT_LABEL && map === HOSPITAL_MAP) PATIENT_LABEL.setMap(null);

      const m = new kakao.maps.Marker({ map, position: PATIENT_POS });

      const label = new kakao.maps.CustomOverlay({
        position: PATIENT_POS,
        yAnchor: 1.4,
        content: `<div class="marker-label patient">â­ í™˜ìë°œìƒì§€</div>`
      });
      label.setMap(map);

      if (map === HOSPITAL_MAP) {
        PATIENT_MARKER = m;
        PATIENT_LABEL = label;
      }
    }

    // âœ… GPS: í˜„ì¬ ìœ„ì¹˜ íšë“ + ì§€ë„ í‘œì‹œ + ì£¼ì†Œ í‘œì‹œ
    function updateUserLocationOnMap() {
      if (!navigator.geolocation) {
        alert('ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìœ„ì¹˜ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }
      if (!HOSPITAL_MAP) {
  GPS_PENDING = true;
  alert('ì§€ë„ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤. ì§€ë„ ì¤€ë¹„ë˜ë©´ ìë™ìœ¼ë¡œ í˜„ì¬ ìœ„ì¹˜ë¥¼ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.');
  return;
}


      navigator.geolocation.getCurrentPosition(
        (pos) => {
          USER_POS = new kakao.maps.LatLng(pos.coords.latitude, pos.coords.longitude);

          renderUserOnMap(HOSPITAL_MAP);

          const gilLatLng = new kakao.maps.LatLng(GIL_COORD.lat, GIL_COORD.lng);
          const bounds = new kakao.maps.LatLngBounds();
          bounds.extend(USER_POS);
          bounds.extend(gilLatLng);
          if (PATIENT_POS) bounds.extend(PATIENT_POS);
          HOSPITAL_MAP.setBounds(bounds);

          reverseGeocode(USER_POS, (addr) => {
            USER_ADDR = addr;
            showGpsAddress(addr);
          });
        },
        (err) => {
          console.warn('Geolocation ì‹¤íŒ¨:', err);
          alert('ìœ„ì¹˜ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ìœ„ì¹˜ ê¶Œí•œì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
        },
        { enableHighAccuracy: true, timeout: 10000 }
      );
    }

    // ì¸ì²œÂ·ë¶€ì²œÂ·ê´‘ëª…Â·ì‹œí¥Â·ê¹€í¬ ì—°ê³„ 2ì°¨ ë³‘ì› ëª©ë¡ (+ ì‘ê¸‰ì‹¤ ì „í™” ë”ë¯¸)
    const SECONDARY_HOSPITALS = [
      { name: "ì¸í•˜ëŒ€ë³‘ì›", region: "ì¸ì²œ ë¯¸ì¶”í™€êµ¬", erTel: "032-890-2301" },
      { name: "í˜„ëŒ€ìœ ë¹„ìŠ¤ë³‘ì›", region: "ì¸ì²œ ë¯¸ì¶”í™€êµ¬", erTel: "032-890-5582" },
      { name: "ì¸ì²œë³´í›ˆë³‘ì›", region: "ì¸ì²œ ë¯¸ì¶”í™€êµ¬", erTel: "032-000-0000" },
      { name: "ì¸ì²œê¸°ë…ë³‘ì›", region: "ì¸ì²œ ì¤‘êµ¬", erTel: "032-270-8300" },
      { name: "ì¸ì²œë°±ë³‘ì›", region: "ì¸ì²œ ì¤‘êµ¬", erTel: "032-280-8119" },
      { name: "ì¸ì²œê´‘ì—­ì‹œì˜ë£Œì›", region: "ì¸ì²œ ë™êµ¬", erTel: "032-580-6119" },
      { name: "ë‰´ì„±ë¯¼ë³‘ì›", region: "ì¸ì²œ ë¯¸ì¶”í™€êµ¬", erTel: "032-726-1119" },
      { name: "ì„¼íŠ¸ëŸ´ë³‘ì›", region: "ê²½ê¸° ì‹œí¥ì‹œ", erTel: "031-8041-3019" },
      { name: "ë‹¤ë‹ˆì—˜ì¢…í•©ë³‘ì›", region: "ê²½ê¸° ë¶€ì²œì‹œ", erTel: "032-670-0119" },
      { name: "ë¶€ì²œìš°ë¦¬ë³‘ì›", region: "ê²½ê¸° ë¶€ì²œì‹œ", erTel: "032-672-2400" },
      { name: "ë‰´ëŒ€ì„±ë³‘ì›", region: "ì¸ì²œ ë¶€í‰êµ¬", erTel: "032-610-1119" },
      { name: "ê²€ë‹¨íƒ‘ë³‘ì›", region: "ì¸ì²œ ì„œêµ¬", erTel: "032-590-0119" },
      { name: "ì¸ì²œì„±ëª¨ë³‘ì›", region: "ì¸ì²œ ë¶€í‰êµ¬", erTel: "032-280-5119" },
      { name: "ë¹„ì—ìŠ¤ì¢…í•©ë³‘ì›", region: "ì¸ì²œ ê°•í™”êµ° ê°•í™”ì", erTel: "032-290-0001" },
      { name: "ê°€í†¨ë¦­ê´€ë™ëŒ€í•™êµ êµ­ì œì„±ëª¨ë³‘ì›", region: "ì¸ì²œ ì„œêµ¬", erTel: "032-1600-6119" },
      { name: "ì¸ì²œì„¸ì¢…ë³‘ì›", region: "ì¸ì²œ ê³„ì–‘êµ¬ ì‘ì „ë™", erTel: "032-240-8000" },
      { name: "í•œë¦¼ë³‘ì› ì‘ê¸‰ì˜ë£Œì„¼í„°", region: "ì¸ì²œ ê³„ì–‘êµ¬", erTel: "032-540-9119" },
      { name: "ë‚˜ì€ë³‘ì›", region: "ì¸ì²œ ì„œêµ¬", erTel: "032-584-4119" },
      { name: "ë‚˜ì‚¬ë ›êµ­ì œë³‘ì›", region: "ì¸ì²œ ì—°ìˆ˜êµ¬", erTel: "032-899-9580" },
      { name: "ì¸ì²œì‚¬ë‘ë³‘ì›", region: "ì¸ì²œ ë¯¸ì¶”í™€êµ¬", erTel: "032-457-2123" },
      { name: "ë¶€ì²œì„±ëª¨ë³‘ì› ì‘ê¸‰ì˜ë£Œì„¼í„°", region: "ê²½ê¸° ë¶€ì²œì‹œ", erTel: "1577-0675" },
      { name: "ì¸ì²œì ì‹­ìë³‘ì›", region: "ì¸ì²œ ì—°ìˆ˜êµ¬", erTel: "032-899-4001" },
      { name: "ì¸ì²œí˜ì°¬ì¢…í•©ë³‘ì›", region: "ì¸ì²œ ë‚¨ë™êµ¬", erTel: "032-1899-2220" },
      { name: "ë”ë“œë¦¼ë³‘ì›", region: "ì¸ì²œ", erTel: "1661-1177" },
      { name: "ìˆœì²œí–¥ëŒ€í•™êµ ë¶€ì† ë¶€ì²œë³‘ì›", region: "ê²½ê¸° ë¶€ì²œì‹œ", erTel: "1899-5700" },
      { name: "ê·¼ë¡œë³µì§€ê³µë‹¨ ì¸ì²œë³‘ì›", region: "ì¸ì²œ ë¶€í‰êµ¬", erTel: "032-500-0119" },
      { name: "ë¶€ì²œì„¸ì¢…ë³‘ì›", region: "ê²½ê¸° ë¶€ì²œì‹œ", erTel: "1599-6677" },
      { name: "ì‹œí™”ë³‘ì›", region: "ê²½ê¸° ì‹œí¥ì‹œ", erTel: "031-1811-7000" },
      { name: "ì¤‘ì•™ëŒ€í•™êµê´‘ëª…ë³‘ì›", region: "ê²½ê¸° ê´‘ëª…ì‹œ", erTel: "1811-7800" },
      { name: "í•œë„ë³‘ì›", region: "ê²½ê¸° ì‹œí¥ì‹œ", erTel: "031-8040-1119" },
      { name: "ì˜¨ëˆ„ë¦¬ë³‘ì›", region: "ì¸ì²œ", erTel: "032-568-9111" },
      { name: "ê´‘ëª…ì„±ì• ë³‘ì› ì‘ê¸‰ì‹¤", region: "ê²½ê¸° ê´‘ëª…ì‹œ", erTel: "02-2680-7115" },
      { name: "ë‰´ê³ ë ¤ë³‘ì›", region: "ê²½ê¸° ê¹€í¬ì‹œ", erTel: "031-980-9119" },
      { name: "ê¹€í¬ìš°ë¦¬ë³‘ì›", region: "ê²½ê¸° ê¹€í¬ì‹œ", erTel: "031-999-1119" },
      { name: "ì‹ ì²œì—°í•©ë³‘ì›", region: "ê²½ê¸° ì‹œí¥ì‹œ", erTel: "1811-0075" }
    ];

    // ë³‘ì› ë¦¬ìŠ¤íŠ¸ë¥¼ Kakao Placesë¡œ ê²€ìƒ‰í•´ì„œ ë§ˆì»¤ + ë¼ë²¨(ì „í™”ë²ˆí˜¸ëŠ” ë¼ë²¨ì— í‘œì‹œ X)
    function addSecondaryHospitalMarkers(kakaoMap) {
      if (!window.kakao || !kakao.maps || !kakao.maps.services) return;

      const places = new kakao.maps.services.Places();
      const bounds = new kakao.maps.LatLngBounds();

      SECONDARY_HOSPITALS.forEach(hospital => {
        const keyword = `${hospital.region} ${hospital.name}`;

        places.keywordSearch(keyword, (data, status) => {
          if (status !== kakao.maps.services.Status.OK || !data.length) {
            console.warn("ë³‘ì› ê²€ìƒ‰ ì‹¤íŒ¨:", hospital.name, status);
            return;
          }

          const place = data[0];
          const position = new kakao.maps.LatLng(place.y, place.x);

          const marker = new kakao.maps.Marker({ map: kakaoMap, position });

          const labelHtml = `
            <div class="marker-label"
                 onclick="window._onTargetClick(${position.getLat()}, ${position.getLng()}, '${esc(hospital.name)}', '${esc(hospital.erTel || '')}')">
              ${esc(hospital.name)}
            </div>
          `;

          const label = new kakao.maps.CustomOverlay({
            position,
            yAnchor: 1.4,
            content: labelHtml
          });
          label.setMap(kakaoMap);

          kakao.maps.event.addListener(marker, "click", () => {
	  showEtaPopup(kakaoMap, position, hospital.name, hospital.erTel);
	  });


          bounds.extend(position);
          kakaoMap.setBounds(bounds);
        });
      });
    }

    // ì ‘ì† ì±„ë„ ë¶„ë¥˜(ì›ë³¸ ìœ ì§€)
    function classifyTraffic() {
      let channel = 'direct_or_unknown';
      let rawRef = document.referrer || '';
      try {
        const url = new URL(window.location.href);
        const src = url.searchParams.get('src') || url.searchParams.get('utm_source');
        if (src) {
          const s = src.toLowerCase();
          if (s.includes('qr')) channel = 'qr';
          else if (s.includes('kakao')) channel = 'kakao';
          else if (s.includes('ems') || s.includes('chat')) channel = 'ems_chat';
          else channel = s;
        } else {
          const ua = navigator.userAgent || '';
          if (/kakao/i.test(rawRef) || /kakaotalk/i.test(ua)) channel = 'kakao';
          else if (rawRef) {
            try { channel = 'referral_' + (new URL(rawRef)).hostname; }
            catch (e) { channel = 'referral_other'; }
          } else channel = 'direct_or_unknown';
        }
      } catch (e) {}
      return { channel, rawRef: rawRef || '(none)' };
    }

    function closeRoleOverlay() {
      const overlay = document.getElementById('role-overlay');
      if (overlay) overlay.style.display = 'none';
      roleOverlayOpen = false;
    }

    function openRoleOverlay() {
      const overlay = document.getElementById('role-overlay');
      if (overlay) {
        overlay.style.display = 'flex';
        if (!roleOverlayOpen) {
          history.pushState({ roleOverlay: true }, '', window.location.href);
          roleOverlayOpen = true;
        }
      }
    }

    function confirmRoleAndCall() {
      const radios = document.querySelectorAll('input[name="user_role"]');
      let selectedRole = null;
      radios.forEach(r => { if (r.checked) selectedRole = r.value; });

      if (!selectedRole) { alert('ì¶œì‹ (ì˜ì‚¬ / êµ¬ê¸‰ëŒ€ì› / ê¸°íƒ€)ì„ ì„ íƒí•´ ì£¼ì„¸ìš”.'); return; }

      currentUserRole = selectedRole;

      if (typeof gtag === 'function') {
        gtag('event', 'select_role', { user_role: selectedRole });
        gtag('set', 'user_properties', { position_type: selectedRole });
      }

      if (selectedRole === 'other') {
        pendingCall = null;
        alert('ë‹¥í„°ì¹´ ì¶œë™ ìš”ì²­ì€ ì˜ì‚¬ ë˜ëŠ” êµ¬ê¸‰ëŒ€ì›ë§Œ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nì¼ë°˜ì¸ì˜ ì§ì ‘ ì „í™” ìš”ì²­ì€ ë¶ˆê°€í•©ë‹ˆë‹¤.');
        closeRoleOverlay();
        return;
      }

      closeRoleOverlay();

      if (pendingCall) {
        executeCall({ tel: pendingCall.tel, target: pendingCall.target, role: selectedRole });
        pendingCall = null;
      }
    }

    function executeCall(info) {
      const tel = info.tel;
      const target = info.target || 'unknown';
      const role = info.role || currentUserRole || 'unknown';
      const callTime = new Date().toISOString();

      if (typeof gtag === 'function') {
        gtag('event', 'click_call_button', {
          user_role: role,
          call_target: target,
          call_time: callTime,
          entry_channel: trafficInfo ? trafficInfo.channel : 'unknown'
        });
      }
      window.location.href = 'tel:' + tel;
    }

    // ========= DOM ë°”ì¸ë”© =========

    trafficInfo = classifyTraffic();
    if (typeof gtag === 'function') {
      gtag('set', 'user_properties', { entry_channel: trafficInfo.channel });
      gtag('event', 'classify_visit', {
        entry_channel: trafficInfo.channel,
        raw_referrer: (trafficInfo.rawRef || '').substring(0, 200)
      });
    }

    const qrCopyBtn = document.getElementById('qr-copy-btn');
    if (qrCopyBtn) {
      qrCopyBtn.addEventListener('click', function () {
        const copy = async () => {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            await navigator.clipboard.writeText(doctorcarUrl);
          } else {
            const textarea = document.createElement('textarea');
            textarea.value = doctorcarUrl;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
          }
        };

        copy().then(() => alert('ë‹¥í„°ì¹´ ì•ˆë‚´ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'))
             .catch(() => alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ ì£¼ì„¸ìš”.'));

        if (typeof gtag === 'function') gtag('event', 'copy_qr_link', { entry_channel: trafficInfo?.channel || 'unknown' });
      });
    }

    const installBtn = document.getElementById('installPwaBtn');
    if (installBtn) {
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
      });

      installBtn.addEventListener('click', async () => {
        if (!deferredPrompt) {
          alert("â€˜ë‹¥í„°ì¹´â€™ ì•±ì´ ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆê±°ë‚˜, í˜„ì¬ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì„¤ì¹˜ ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\níœ´ëŒ€í° í™ˆ í™”ë©´ì—ì„œ â€˜ë‹¥í„°ì¹´â€™ë¥¼ ê²€ìƒ‰í•´ ì‹¤í–‰í•´ì£¼ì„¸ìš”.");
          return;
        }
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;

        if (typeof gtag === 'function') {
          gtag('event', 'click_pwa_install', { outcome, entry_channel: trafficInfo?.channel || 'unknown' });
        }
        deferredPrompt = null;
      });
    }

    const pcShortcutBtn = document.getElementById('pc-shortcut-btn');
    if (pcShortcutBtn) {
      if (/Mobi|Android|iPhone|iPad/i.test(navigator.userAgent)) {
        pcShortcutBtn.style.display = 'none';
      } else {
        pcShortcutBtn.addEventListener('click', function () {
          if (typeof gtag === 'function') gtag('event', 'download_pc_shortcut', { entry_channel: trafficInfo?.channel || 'unknown' });
        });
      }
    }

    document.querySelectorAll('.call-btn').forEach(btn => {
      btn.addEventListener('click', function () {
        const tel = btn.getAttribute('data-tel') || '01062063010';
        const target = btn.getAttribute('data-call-target') || 'unknown';
        pendingCall = { tel, target };
        openRoleOverlay();
      });
    });

    const openSurveyBtn = document.getElementById('open-survey-btn');
    if (openSurveyBtn) {
      openSurveyBtn.addEventListener('click', function () {
        if (typeof gtag === 'function') {
          gtag('event', 'click_survey_banner', {
            user_role: currentUserRole || 'unknown',
            survey_click_time: new Date().toISOString(),
            entry_channel: trafficInfo?.channel || 'unknown'
          });
        }
        document.getElementById('survey')?.scrollIntoView({ behavior: 'smooth' });
      });
    }

    window.addEventListener('popstate', function () {
      const overlay = document.getElementById('role-overlay');
      if (roleOverlayOpen && overlay && overlay.style.display !== 'none') closeRoleOverlay();
    });
    const roleOverlay = document.getElementById('role-overlay');
    if (roleOverlay) {
      roleOverlay.addEventListener('click', function (e) { if (e.target === roleOverlay) closeRoleOverlay(); });
    }
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        const overlay = document.getElementById('role-overlay');
        if (roleOverlayOpen && overlay && overlay.style.display !== 'none') closeRoleOverlay();
      }
    });

    // âœ… ì§€ë„ ì„¹ì…˜ GPS ë²„íŠ¼(ì—¬ê¸°ë§Œ)
    const enableGpsMapBtn = document.getElementById('enable-gps-map-btn');
    if (enableGpsMapBtn) {
      enableGpsMapBtn.addEventListener('click', function () {
        if (typeof gtag === 'function') gtag('event', 'click_enable_gps_map', { entry_channel: trafficInfo?.channel || 'unknown' });
        updateUserLocationOnMap();
        document.getElementById('map')?.scrollIntoView({ behavior: 'smooth' });
      });
    }

    // âœ… ìˆ˜ë™ í™˜ìë°œìƒì§€ ìë™ì™„ì„±
    const manualPanel = document.getElementById('manual-panel');
    const patientInput = document.getElementById('patient-input');
    const patientResults = document.getElementById('patient-results');

    let patientPlaces = null;

    function clearPatientResults() {
      if (!patientResults) return;
      patientResults.innerHTML = '';
      patientResults.style.display = 'none';
    }

    function renderPatientResults(list) {
      if (!patientResults) return;
      patientResults.innerHTML = '';
      if (!list || !list.length) {
        patientResults.style.display = 'none';
        return;
      }

      list.slice(0, 6).forEach(item => {
        const name = item.place_name || item.address_name || 'ê²°ê³¼';
        const addr = item.road_address_name || item.address_name || '';
        const div = document.createElement('div');
        div.className = 'manual-item';
        div.innerHTML = `<b>${esc(name)}</b><small>${esc(addr)}</small>`;
        div.addEventListener('click', () => {
          const lat = parseFloat(item.y);
          const lng = parseFloat(item.x);
          PATIENT_POS = new kakao.maps.LatLng(lat, lng);
          PATIENT_ADDR = addr || name;

          renderPatientOnMap(HOSPITAL_MAP);

          const bounds = new kakao.maps.LatLngBounds();
          bounds.extend(new kakao.maps.LatLng(GIL_COORD.lat, GIL_COORD.lng));
          bounds.extend(PATIENT_POS);
          if (USER_POS) bounds.extend(USER_POS);
          HOSPITAL_MAP.setBounds(bounds);

          patientInput.value = name;
          clearPatientResults();

          alert('í™˜ìë°œìƒì§€ê°€ ì§€ë„ì— í‘œì‹œë˜ì—ˆìŠµë‹ˆë‹¤. ë³‘ì›/ê¸¸ë³‘ì› ë¼ë²¨(ë˜ëŠ” ë§ˆì»¤)ì„ í´ë¦­í•˜ë©´ ì†Œìš”ì‹œê°„ê³¼ ì „í™”ë²ˆí˜¸ê°€ í‘œì‹œë©ë‹ˆë‹¤.');
        });
        patientResults.appendChild(div);
      });

      patientResults.style.display = 'block';
    }

    if (patientInput) {
      patientPlaces = new kakao.maps.services.Places();

      let t = null;
      patientInput.addEventListener('input', () => {
        const q = patientInput.value.trim();
        if (t) clearTimeout(t);
        if (q.length < 2) { clearPatientResults(); return; }

        t = setTimeout(() => {
          patientPlaces.keywordSearch(q, (data, status) => {
            if (status !== kakao.maps.services.Status.OK || !data || !data.length) {
              clearPatientResults();
              return;
            }
            renderPatientResults(data);
          });
        }, 250);
      });

      document.addEventListener('click', (e) => {
        if (!manualPanel) return;
        if (manualPanel.contains(e.target)) return;
        clearPatientResults();
      });
    }

    // âœ… ë¼ë²¨ í´ë¦­ ê³µìš©(ë³‘ì›/ê¸¸ë³‘ì›)
    window._onTargetClick = function(lat, lng, name, tel) {
  if (!HOSPITAL_MAP) return;
  const pos = new kakao.maps.LatLng(lat, lng);
  showEtaPopup(HOSPITAL_MAP, pos, name || 'ëŒ€ìƒ', tel || '');
};


    // ë³‘ì› ì§€ë„ ì´ˆê¸°í™”
    function initSecondaryHospitalsMap() {
      const mapContainer = document.getElementById('secondary-hospitals-map');
      if (!mapContainer) return;

      function createMap() {
        const center = new kakao.maps.LatLng(37.48, 126.74);
        const hospitalMap = new kakao.maps.Map(mapContainer, { center, level: 8 });
        console.log('ë³‘ì› ì§€ë„ ìƒì„± ì™„ë£Œ');

        HOSPITAL_MAP = hospitalMap;

// âœ… ì²« í´ë¦­ì´ ë„ˆë¬´ ë¹¨ëìœ¼ë©´ ì§€ë„ ì¤€ë¹„ ì§í›„ ìë™ìœ¼ë¡œ GPS ë‹¤ì‹œ ì‹œë„
if (GPS_PENDING) {
  GPS_PENDING = false;
  updateUserLocationOnMap();
}


        // ê¸¸ë³‘ì› ë§ˆì»¤ + ë¼ë²¨(í´ë¦­ ì‹œ ETA)
        const gilLatLng = new kakao.maps.LatLng(GIL_COORD.lat, GIL_COORD.lng);

        const gilMarker = new kakao.maps.Marker({ map: hospitalMap, position: gilLatLng });

        const gilLabel = new kakao.maps.CustomOverlay({
          position: gilLatLng,
          yAnchor: 1.4,
          content: `
            <div class="marker-label gil"
                 onclick="window._onTargetClick(${GIL_COORD.lat}, ${GIL_COORD.lng}, 'ê¸¸ë³‘ì›', '')">
              ğŸ’œ ê¸¸ë³‘ì›
            </div>`
        });
        gilLabel.setMap(hospitalMap);

        kakao.maps.event.addListener(gilMarker, 'click', function () {
  showEtaPopup(hospitalMap, gilLatLng, 'ê¸¸ë³‘ì›', '');
});


        addSecondaryHospitalMarkers(hospitalMap);
      }

      if (!window.kakao || !kakao.maps) {
        console.warn('kakao.maps ê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•„ 300ms í›„ ì¬ì‹œë„í•©ë‹ˆë‹¤.');
        setTimeout(initSecondaryHospitalsMap, 300);
        return;
      }

      createMap();
    }

    // âœ… ì§€ë„ í¬ê²Œë³´ê¸°(PCë§Œ)
    const openModalBtn = document.getElementById('open-map-modal-btn');
    const mapModal = document.getElementById('map-modal');
    const closeModalBtn = document.getElementById('close-map-modal-btn');
    let MODAL_MAP = null;

    function isMobileUA() {
      return /Mobi|Android|iPhone|iPad/i.test(navigator.userAgent);
    }

    function openMapModal() {
      if (isMobileUA()) return;
      if (!mapModal) return;
      mapModal.style.display = 'flex';

      if (!MODAL_MAP) {
        const container = document.getElementById('modal-map');
        const center = HOSPITAL_MAP ? HOSPITAL_MAP.getCenter() : new kakao.maps.LatLng(37.48, 126.74);
        MODAL_MAP = new kakao.maps.Map(container, { center, level: 7 });

        const gilLatLng = new kakao.maps.LatLng(GIL_COORD.lat, GIL_COORD.lng);
        const gilMarker = new kakao.maps.Marker({ map: MODAL_MAP, position: gilLatLng });

        const gilLabel = new kakao.maps.CustomOverlay({
          position: gilLatLng,
          yAnchor: 1.4,
          content: `
            <div class="marker-label gil"
                 onclick="(function(){ window._onTargetClick(${GIL_COORD.lat}, ${GIL_COORD.lng}, 'ê¸¸ë³‘ì›', ''); })()">
              ğŸ’œ ê¸¸ë³‘ì›
            </div>`
        });
        gilLabel.setMap(MODAL_MAP);

        kakao.maps.event.addListener(gilMarker, 'click', function () {
  showEtaPopup(MODAL_MAP, gilLatLng, 'ê¸¸ë³‘ì›', '');
});



        addSecondaryHospitalMarkers(MODAL_MAP);

        if (USER_POS) renderUserOnMap(MODAL_MAP);
        if (PATIENT_POS) renderPatientOnMap(MODAL_MAP);
      } else {
        if (USER_POS) renderUserOnMap(MODAL_MAP);
        if (PATIENT_POS) renderPatientOnMap(MODAL_MAP);
        setTimeout(() => MODAL_MAP.relayout(), 50);
      }
    }

    function closeMapModal() {
      if (!mapModal) return;
      mapModal.style.display = 'none';
    }

    if (openModalBtn) {
      if (isMobileUA()) {
        openModalBtn.style.display = 'none';
      } else {
        openModalBtn.addEventListener('click', openMapModal);
      }
    }
    if (closeModalBtn) closeModalBtn.addEventListener('click', closeMapModal);
    if (mapModal) {
      mapModal.addEventListener('click', (e) => {
        if (e.target === mapModal) closeMapModal();
      });
    }
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && mapModal && mapModal.style.display === 'flex') closeMapModal();
    });

    window.addEventListener('load', initSecondaryHospitalsMap);


// ====== ì„¤ë¬¸: ë‹¥í„°ì¹´ ì‹¤ì œ ì´ìš© ê²½í—˜(ì˜ˆ/ì•„ë‹ˆì˜¤) â†’ ì•„ë˜ ë¸”ë¡ í† ê¸€ ======
(function initDoctorcarExperienceToggle(){
  const block = document.getElementById('doctorcar-experience-block');
  const radios = document.querySelectorAll('input[name="used_doctorcar"]');

  if (!block || !radios || !radios.length) return;

  function setBlock(open){
    if (open) {
      block.classList.add('is-open');
      block.style.display = 'block';
    } else {
      block.classList.remove('is-open');
      block.style.display = 'none';

      // âœ… ì•„ë‹ˆì˜¤ë¡œ ë°”ê¾¸ë©´, ì˜ˆì— í•´ë‹¹í•˜ëŠ” í•˜ìœ„ ì…ë ¥ê°’ë“¤ ì´ˆê¸°í™”(ì›í•˜ì‹œë©´ ì´ ë¶€ë¶„ ë¹¼ë„ ë¨)
      block.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
      const tt = block.querySelector('textarea[name="treatment_free_text"]');
      if (tt) { tt.value = ''; document.getElementById('treatment_free_counter') && (document.getElementById('treatment_free_counter').textContent = '0 / 100ì'); }
    }
  }

  // ì´ˆê¸° ìƒíƒœ ë°˜ì˜(ìƒˆë¡œê³ ì¹¨ ì‹œ)
  const checked = document.querySelector('input[name="used_doctorcar"]:checked');
  setBlock(checked && checked.value === 'yes');

  // ë³€ê²½ ì´ë²¤íŠ¸
  radios.forEach(r => {
    r.addEventListener('change', () => {
      setBlock(r.value === 'yes' && r.checked);
    });
  });
})();

// ====== ì„¤ë¬¸ ì œì¶œ ì•Œë¦¼(ìµœì†Œ ë³´ì¥) ======
(function attachSurveySubmitAlert(){
  const form = document.getElementById('doctorcar-survey');
  if (!form) {
    console.warn('[survey] form not found: #doctorcar-survey');
    return;
  }

  form.addEventListener('submit', function(e){
    e.preventDefault(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ë°©ì§€

    // (ì„ íƒ) GA ì´ë²¤íŠ¸ë„ ê°™ì´ ì°ê³  ì‹¶ìœ¼ë©´
    if (typeof gtag === 'function') {
      gtag('event', 'submit_survey_doctorcar', {
        user_role: (window.currentUserRole || 'unknown'),
        entry_channel: (window.trafficInfo?.channel || 'unknown'),
        submit_time: new Date().toISOString()
      });
    }

    alert('ì„¤ë¬¸ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤!');
    form.reset(); // ì œì¶œ í›„ ì´ˆê¸°í™” (ì›ì¹˜ ì•Šìœ¼ë©´ ì´ ì¤„ ì‚­ì œ)
  }, { passive: false });
})();


  </script>
</body>
</html>
